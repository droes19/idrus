import{style as p,animate as d,transition as _,trigger as k}from"@angular/animations";import*as s from"@angular/common";import{DOCUMENT as S,CommonModule as C}from"@angular/common";import*as e from"@angular/core";import{EventEmitter as m}from"@angular/core";import*as f from"primeng/api";import{PrimeTemplate as x,SharedModule as g}from"primeng/api";import{DomHandler as c}from"primeng/dom";import{EyeIcon as h}from"primeng/icons/eye";import{RefreshIcon as v}from"primeng/icons/refresh";import{SearchMinusIcon as I}from"primeng/icons/searchminus";import{SearchPlusIcon as w}from"primeng/icons/searchplus";import{TimesIcon as y}from"primeng/icons/times";import{UndoIcon as T}from"primeng/icons/undo";import{ZIndexUtils as u}from"primeng/utils";import*as b from"primeng/focustrap";import{FocusTrapModule as z}from"primeng/focustrap";var V=["mask"],E=["previewButton"],O=["closeButton"];function M(i,o){i&1&&e.ɵɵelementContainer(0)}function L(i,o){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,M,1,0,"ng-container",8),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(2);e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.indicatorTemplate)}}function P(i,o){i&1&&e.ɵɵelement(0,"EyeIcon",9),i&2&&e.ɵɵproperty("styleClass","p-image-preview-icon")}var A=(i,o)=>({height:i,width:o});function R(i,o){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"button",4,5),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.onImageClick())}),e.ɵɵtemplate(2,L,2,1,"ng-container",6)(3,P,1,1,"ng-template",null,7,e.ɵɵtemplateRefExtractor),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵreference(4),a=e.ɵɵnextContext();e.ɵɵproperty("ngStyle",e.ɵɵpureFunction2(4,A,a.height+"px",a.width+"px")),e.ɵɵattribute("aria-label",a.zoomImageAriaLabel),e.ɵɵadvance(2),e.ɵɵproperty("ngIf",a.indicatorTemplate)("ngIfElse",t)}}function B(i,o){i&1&&e.ɵɵelement(0,"RefreshIcon")}function D(i,o){}function Q(i,o){i&1&&e.ɵɵtemplate(0,D,0,0,"ng-template")}function H(i,o){i&1&&e.ɵɵelement(0,"UndoIcon")}function j(i,o){}function F(i,o){i&1&&e.ɵɵtemplate(0,j,0,0,"ng-template")}function N(i,o){i&1&&e.ɵɵelement(0,"SearchMinusIcon")}function U(i,o){}function Z(i,o){i&1&&e.ɵɵtemplate(0,U,0,0,"ng-template")}function q(i,o){i&1&&e.ɵɵelement(0,"SearchPlusIcon")}function K(i,o){}function G(i,o){i&1&&e.ɵɵtemplate(0,K,0,0,"ng-template")}function J(i,o){i&1&&e.ɵɵelement(0,"TimesIcon")}function W(i,o){}function X(i,o){i&1&&e.ɵɵtemplate(0,W,0,0,"ng-template")}var Y=(i,o)=>({showTransitionParams:i,hideTransitionParams:o}),$=i=>({value:"visible",params:i});function ee(i,o){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div"),e.ɵɵlistener("@animation.start",function(n){e.ɵɵrestoreView(t);let r=e.ɵɵnextContext(2);return e.ɵɵresetView(r.onAnimationStart(n))})("@animation.done",function(n){e.ɵɵrestoreView(t);let r=e.ɵɵnextContext(2);return e.ɵɵresetView(r.onAnimationEnd(n))}),e.ɵɵelementStart(1,"img",17),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext(2);return e.ɵɵresetView(n.onPreviewImageClick())}),e.ɵɵelementEnd()()}if(i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("@animation",e.ɵɵpureFunction1(8,$,e.ɵɵpureFunction2(5,Y,t.showTransitionOptions,t.hideTransitionOptions))),e.ɵɵadvance(1),e.ɵɵproperty("ngStyle",t.imagePreviewStyle()),e.ɵɵattribute("src",t.previewImageSrc?t.previewImageSrc:t.src,e.ɵɵsanitizeUrl)("srcset",t.previewImageSrcSet)("sizes",t.previewImageSizes)}}function te(i,o){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",10,11),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.onMaskClick())})("keydown",function(n){e.ɵɵrestoreView(t);let r=e.ɵɵnextContext();return e.ɵɵresetView(r.onMaskKeydown(n))}),e.ɵɵelementStart(2,"div",12),e.ɵɵlistener("click",function(n){e.ɵɵrestoreView(t);let r=e.ɵɵnextContext();return e.ɵɵresetView(r.handleToolbarClick(n))}),e.ɵɵelementStart(3,"button",13),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.rotateRight())}),e.ɵɵtemplate(4,B,1,0,"RefreshIcon",14)(5,Q,1,0,null,8),e.ɵɵelementEnd(),e.ɵɵelementStart(6,"button",13),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.rotateLeft())}),e.ɵɵtemplate(7,H,1,0,"UndoIcon",14)(8,F,1,0,null,8),e.ɵɵelementEnd(),e.ɵɵelementStart(9,"button",15),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.zoomOut())}),e.ɵɵtemplate(10,N,1,0,"SearchMinusIcon",14)(11,Z,1,0,null,8),e.ɵɵelementEnd(),e.ɵɵelementStart(12,"button",15),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.zoomIn())}),e.ɵɵtemplate(13,q,1,0,"SearchPlusIcon",14)(14,G,1,0,null,8),e.ɵɵelementEnd(),e.ɵɵelementStart(15,"button",13,16),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext();return e.ɵɵresetView(n.closePreview())}),e.ɵɵtemplate(17,J,1,0,"TimesIcon",14)(18,X,1,0,null,8),e.ɵɵelementEnd()(),e.ɵɵtemplate(19,ee,2,10,"div",14),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵnextContext();e.ɵɵattribute("aria-modal",t.maskVisible),e.ɵɵadvance(3),e.ɵɵattribute("aria-label",t.rightAriaLabel()),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.rotateRightIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.rotateRightIconTemplate),e.ɵɵadvance(1),e.ɵɵattribute("aria-label",t.leftAriaLabel()),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.rotateLeftIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.rotateLeftIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("disabled",t.isZoomOutDisabled),e.ɵɵattribute("aria-label",t.zoomOutAriaLabel()),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.zoomOutIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.zoomOutIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("disabled",t.isZoomInDisabled),e.ɵɵattribute("aria-label",t.zoomInAriaLabel()),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.zoomInIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.zoomInIconTemplate),e.ɵɵadvance(1),e.ɵɵattribute("aria-label",t.closeAriaLabel()),e.ɵɵadvance(2),e.ɵɵproperty("ngIf",!t.closeIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.closeIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.previewVisible)}}var Se=(()=>{class i{document;config;cd;el;imageClass;imageStyle;styleClass;style;src;srcSet;sizes;previewImageSrc;previewImageSrcSet;previewImageSizes;alt;width;height;loading;appendTo;preview=!1;showTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";onShow=new m;onHide=new m;onImageError=new m;mask;previewButton;closeButton;templates;indicatorTemplate;rotateRightIconTemplate;rotateLeftIconTemplate;zoomOutIconTemplate;zoomInIconTemplate;closeIconTemplate;maskVisible=!1;previewVisible=!1;rotate=0;scale=1;previewClick=!1;container;wrapper;get isZoomOutDisabled(){return this.scale-this.zoomSettings.step<=this.zoomSettings.min}get isZoomInDisabled(){return this.scale+this.zoomSettings.step>=this.zoomSettings.max}zoomSettings={default:1,step:.1,max:1.5,min:.5};constructor(t,a,n,r){this.document=t,this.config=a,this.cd=n,this.el=r}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"indicator":this.indicatorTemplate=t.template;break;case"rotaterighticon":this.rotateRightIconTemplate=t.template;break;case"rotatelefticon":this.rotateLeftIconTemplate=t.template;break;case"zoomouticon":this.zoomOutIconTemplate=t.template;break;case"zoominicon":this.zoomInIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;default:this.indicatorTemplate=t.template;break}})}onImageClick(){this.preview&&(this.maskVisible=!0,this.previewVisible=!0,c.blockBodyScroll())}onMaskClick(){this.previewClick||this.closePreview(),this.previewClick=!1}onMaskKeydown(t){switch(t.code){case"Escape":this.onMaskClick(),setTimeout(()=>{c.focus(this.previewButton.nativeElement)},25),t.preventDefault();break;default:break}}onPreviewImageClick(){this.previewClick=!0}rotateRight(){this.rotate+=90,this.previewClick=!0}rotateLeft(){this.rotate-=90,this.previewClick=!0}zoomIn(){this.scale=this.scale+this.zoomSettings.step,this.previewClick=!0}zoomOut(){this.scale=this.scale-this.zoomSettings.step,this.previewClick=!0}onAnimationStart(t){switch(t.toState){case"visible":this.container=t.element,this.wrapper=this.container?.parentElement,this.appendContainer(),this.moveOnTop(),setTimeout(()=>{c.focus(this.closeButton.nativeElement)},25);break;case"void":c.addClass(this.wrapper,"p-component-overlay-leave");break}}onAnimationEnd(t){switch(t.toState){case"void":u.clear(this.wrapper),this.maskVisible=!1,this.container=null,this.wrapper=null,this.cd.markForCheck(),this.onHide.emit({});break;case"visible":this.onShow.emit({});break}}moveOnTop(){u.set("modal",this.wrapper,this.config.zIndex.modal)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.document.body.appendChild(this.wrapper):c.appendChild(this.wrapper,this.appendTo))}imagePreviewStyle(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}}get zoomImageAriaLabel(){return this.config.translation.aria?this.config.translation.aria.zoomImage:void 0}containerClass(){return{"p-image p-component":!0,"p-image-preview-container":this.preview}}handleToolbarClick(t){t.stopPropagation()}closePreview(){this.previewVisible=!1,this.rotate=0,this.scale=this.zoomSettings.default,c.unblockBodyScroll()}imageError(t){this.onImageError.emit(t)}rightAriaLabel(){return this.config.translation.aria?this.config.translation.aria.rotateRight:void 0}leftAriaLabel(){return this.config.translation.aria?this.config.translation.aria.rotateLeft:void 0}zoomInAriaLabel(){return this.config.translation.aria?this.config.translation.aria.zoomIn:void 0}zoomOutAriaLabel(){return this.config.translation.aria?this.config.translation.aria.zoomOut:void 0}closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}onKeydownHandler(t){this.previewVisible&&this.closePreview()}static ɵfac=function(a){return new(a||i)(e.ɵɵdirectiveInject(S),e.ɵɵdirectiveInject(f.PrimeNGConfig),e.ɵɵdirectiveInject(e.ChangeDetectorRef),e.ɵɵdirectiveInject(e.ElementRef))};static ɵcmp=e.ɵɵdefineComponent({type:i,selectors:[["p-image"]],contentQueries:function(a,n,r){if(a&1&&e.ɵɵcontentQuery(r,x,4),a&2){let l;e.ɵɵqueryRefresh(l=e.ɵɵloadQuery())&&(n.templates=l)}},viewQuery:function(a,n){if(a&1&&(e.ɵɵviewQuery(V,5),e.ɵɵviewQuery(E,5),e.ɵɵviewQuery(O,5)),a&2){let r;e.ɵɵqueryRefresh(r=e.ɵɵloadQuery())&&(n.mask=r.first),e.ɵɵqueryRefresh(r=e.ɵɵloadQuery())&&(n.previewButton=r.first),e.ɵɵqueryRefresh(r=e.ɵɵloadQuery())&&(n.closeButton=r.first)}},hostAttrs:[1,"p-element"],hostBindings:function(a,n){a&1&&e.ɵɵlistener("keydown.escape",function(l){return n.onKeydownHandler(l)},!1,e.ɵɵresolveDocument)},inputs:{imageClass:"imageClass",imageStyle:"imageStyle",styleClass:"styleClass",style:"style",src:"src",srcSet:"srcSet",sizes:"sizes",previewImageSrc:"previewImageSrc",previewImageSrcSet:"previewImageSrcSet",previewImageSizes:"previewImageSizes",alt:"alt",width:"width",height:"height",loading:"loading",appendTo:"appendTo",preview:"preview",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide",onImageError:"onImageError"},decls:4,vars:16,consts:[[3,"ngClass","ngStyle"],[3,"ngStyle","error"],["type","button","class","p-image-preview-indicator","style","border: 'none';",3,"ngStyle","click",4,"ngIf"],["class","p-image-mask p-component-overlay p-component-overlay-enter","role","dialog","pFocusTrap","",3,"click","keydown",4,"ngIf"],["type","button",1,"p-image-preview-indicator",2,"border","'none'",3,"ngStyle","click"],["previewButton",""],[4,"ngIf","ngIfElse"],["defaultTemplate",""],[4,"ngTemplateOutlet"],[3,"styleClass"],["role","dialog","pFocusTrap","",1,"p-image-mask","p-component-overlay","p-component-overlay-enter",3,"click","keydown"],["mask",""],[1,"p-image-toolbar",3,"click"],["type","button",1,"p-image-action","p-link",3,"click"],[4,"ngIf"],["type","button",1,"p-image-action","p-link",3,"disabled","click"],["closeButton",""],[1,"p-image-preview",3,"ngStyle","click"]],template:function(a,n){a&1&&(e.ɵɵelementStart(0,"span",0)(1,"img",1),e.ɵɵlistener("error",function(l){return n.imageError(l)}),e.ɵɵelementEnd(),e.ɵɵtemplate(2,R,5,7,"button",2)(3,te,20,19,"div",3),e.ɵɵelementEnd()),a&2&&(e.ɵɵclassMap(n.styleClass),e.ɵɵproperty("ngClass",n.containerClass())("ngStyle",n.style),e.ɵɵadvance(1),e.ɵɵclassMap(n.imageClass),e.ɵɵproperty("ngStyle",n.imageStyle),e.ɵɵattribute("src",n.src,e.ɵɵsanitizeUrl)("srcset",n.srcSet)("sizes",n.sizes)("alt",n.alt)("width",n.width)("height",n.height)("loading",n.loading),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",n.preview),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",n.maskVisible))},dependencies:()=>[s.NgClass,s.NgIf,s.NgTemplateOutlet,s.NgStyle,v,h,T,I,w,y,b.FocusTrap],styles:[`@layer primeng{.p-image-mask{display:flex;align-items:center;justify-content:center}.p-image-preview-container{position:relative;display:inline-block;line-height:0}.p-image-preview-indicator{position:absolute;left:0;top:0;width:100%;height:100%;outline:none;border:none;padding:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.p-image-preview-icon.pi{font-size:1.5rem}.p-image-preview-icon.p-icon{scale:1.5}.p-image-preview-container:hover>.p-image-preview-indicator{opacity:1;cursor:pointer}.p-image-preview-container>img{cursor:pointer}.p-image-toolbar{position:absolute;top:0;right:0;display:flex;z-index:1}.p-image-action.p-link{display:flex;justify-content:center;align-items:center}.p-image-action.p-link[disabled]{opacity:.5}.p-image-preview{transition:transform .15s;max-width:100vw;max-height:100vh}}
`],encapsulation:2,data:{animation:[k("animation",[_("void => visible",[p({transform:"scale(0.7)",opacity:0}),d("{{showTransitionParams}}")]),_("visible => void",[d("{{hideTransitionParams}}",p({transform:"scale(0.7)",opacity:0}))])])]},changeDetection:0})}return i})(),Ce=(()=>{class i{static ɵfac=function(a){return new(a||i)};static ɵmod=e.ɵɵdefineNgModule({type:i});static ɵinj=e.ɵɵdefineInjector({imports:[C,g,v,h,T,I,w,y,z,g]})}return i})();export{Se as Image,Ce as ImageModule};