import*as c from"@angular/common";import{CommonModule as f}from"@angular/common";import*as e from"@angular/core";import{forwardRef as h,EventEmitter as d}from"@angular/core";import{NG_VALUE_ACCESSOR as g}from"@angular/forms";import{PrimeTemplate as _,SharedModule as b}from"primeng/api";import*as m from"primeng/ripple";import{RippleModule as y}from"primeng/ripple";import{ObjectUtils as u}from"primeng/utils";var v=["container"];function x(l,s){if(l&1&&e.ɵɵelement(0,"span",8),l&2){let t=e.ɵɵnextContext(2).$implicit;e.ɵɵclassMap(t.icon),e.ɵɵproperty("ngClass","p-button-icon p-button-icon-left"),e.ɵɵattribute("data-pc-section","icon")}}function C(l,s){if(l&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,x,1,4,"span",6),e.ɵɵelementStart(2,"span",7),e.ɵɵtext(3),e.ɵɵelementEnd(),e.ɵɵelementContainerEnd()),l&2){let t=e.ɵɵnextContext().$implicit,i=e.ɵɵnextContext();e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.icon),e.ɵɵadvance(1),e.ɵɵattribute("data-pc-section","label"),e.ɵɵadvance(1),e.ɵɵtextInterpolate(i.getOptionLabel(t))}}function w(l,s){l&1&&e.ɵɵelementContainer(0)}var S=(l,s)=>({$implicit:l,index:s});function O(l,s){if(l&1&&e.ɵɵtemplate(0,w,1,0,"ng-container",9),l&2){let t=e.ɵɵnextContext(),i=t.$implicit,o=t.index,n=e.ɵɵnextContext();e.ɵɵproperty("ngTemplateOutlet",n.selectButtonTemplate)("ngTemplateOutletContext",e.ɵɵpureFunction2(2,S,i,o))}}var T=(l,s,t)=>({"p-highlight":l,"p-disabled":s,"p-button-icon-only":t});function E(l,s){if(l&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",3),e.ɵɵlistener("click",function(o){let n=e.ɵɵrestoreView(t),a=n.$implicit,r=n.index,p=e.ɵɵnextContext();return e.ɵɵresetView(p.onOptionSelect(o,a,r))})("keydown",function(o){let n=e.ɵɵrestoreView(t),a=n.$implicit,r=n.index,p=e.ɵɵnextContext();return e.ɵɵresetView(p.onKeyDown(o,a,r))})("focus",function(o){let a=e.ɵɵrestoreView(t).index,r=e.ɵɵnextContext();return e.ɵɵresetView(r.onFocus(o,a))})("blur",function(){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onBlur())}),e.ɵɵtemplate(1,C,4,3,"ng-container",4)(2,O,1,5,"ng-template",null,5,e.ɵɵtemplateRefExtractor),e.ɵɵelementEnd()}if(l&2){let t=s.$implicit,i=s.index,o=e.ɵɵreference(3),n=e.ɵɵnextContext();e.ɵɵclassMap(t.styleClass),e.ɵɵproperty("role",n.multiple?"checkbox":"radio")("ngClass",e.ɵɵpureFunction3(14,T,n.isSelected(t),n.disabled||n.isOptionDisabled(t),t.icon&&!n.getOptionLabel(t))),e.ɵɵattribute("tabindex",i===n.focusedIndex?"0":"-1")("aria-label",t.label)("aria-checked",n.isSelected(t))("aria-disabled",n.optionDisabled)("aria-pressed",n.isSelected(t))("title",t.title)("aria-labelledby",n.getOptionLabel(t))("data-pc-section","button"),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!n.itemTemplate)("ngIfElse",o)}}var V={provide:g,useExisting:h(()=>D),multi:!0},D=(()=>{class l{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new d;onChange=new d;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(t){this.cd=t}getOptionLabel(t){return this.optionLabel?u.resolveFieldData(t,this.optionLabel):t.label!=null?t.label:t}getOptionValue(t){return this.optionValue?u.resolveFieldData(t,this.optionValue):this.optionLabel||t.value===void 0?t:t.value}isOptionDisabled(t){return this.optionDisabled?u.resolveFieldData(t,this.optionDisabled):t.disabled!==void 0?t.disabled:!1}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionSelect(t,i,o){if(this.disabled||this.isOptionDisabled(i))return;let n=this.isSelected(i);if(n&&this.unselectable)return;let a=this.getOptionValue(i),r;if(this.multiple)n?r=this.value.filter(p=>!u.equals(p,a,this.equalityKey)):r=this.value?[...this.value,a]:[a];else{if(n&&!this.allowEmpty)return;r=n?null:a}this.focusedIndex=o,this.value=r,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.onOptionClick.emit({originalEvent:t,option:i,index:o})}onKeyDown(t,i,o){switch(t.code){case"Space":{this.onOptionSelect(t,i,o),t.preventDefault();break}case"ArrowDown":case"ArrowRight":{this.changeTabIndexes(t,"next"),t.preventDefault();break}case"ArrowUp":case"ArrowLeft":{this.changeTabIndexes(t,"prev"),t.preventDefault();break}default:break}}changeTabIndexes(t,i){let o,n;for(let a=0;a<=this.container.nativeElement.children.length-1;a++)this.container.nativeElement.children[a].getAttribute("tabindex")==="0"&&(o={elem:this.container.nativeElement.children[a],index:a});i==="prev"?o.index===0?n=this.container.nativeElement.children.length-1:n=o.index-1:o.index===this.container.nativeElement.children.length-1?n=0:n=o.index+1,this.focusedIndex=n,this.container.nativeElement.children[n].focus()}onFocus(t,i){this.focusedIndex=i}onBlur(){this.onModelTouched()}removeOption(t){this.value=this.value.filter(i=>!u.equals(i,this.getOptionValue(t),this.dataKey))}isSelected(t){let i=!1,o=this.getOptionValue(t);if(this.multiple){if(this.value&&Array.isArray(this.value)){for(let n of this.value)if(u.equals(n,o,this.dataKey)){i=!0;break}}}else i=u.equals(this.getOptionValue(t),this.value,this.equalityKey);return i}static ɵfac=function(i){return new(i||l)(e.ɵɵdirectiveInject(e.ChangeDetectorRef))};static ɵcmp=e.ɵɵdefineComponent({type:l,selectors:[["p-selectButton"]],contentQueries:function(i,o,n){if(i&1&&e.ɵɵcontentQuery(n,_,5),i&2){let a;e.ɵɵqueryRefresh(a=e.ɵɵloadQuery())&&(o.itemTemplate=a.first)}},viewQuery:function(i,o){if(i&1&&e.ɵɵviewQuery(v,5),i&2){let n;e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.container=n.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:"unselectable",tabindex:"tabindex",multiple:"multiple",allowEmpty:"allowEmpty",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[e.ɵɵProvidersFeature([V])],decls:3,vars:8,consts:[["role","group",3,"ngClass","ngStyle"],["container",""],["pRipple","","class","p-button p-component",3,"role","class","ngClass","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","",1,"p-button","p-component",3,"role","ngClass","click","keydown","focus","blur"],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,o){i&1&&(e.ɵɵelementStart(0,"div",0,1),e.ɵɵtemplate(2,E,4,18,"div",2),e.ɵɵelementEnd()),i&2&&(e.ɵɵclassMap(o.styleClass),e.ɵɵproperty("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",o.style),e.ɵɵattribute("aria-labelledby",o.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),e.ɵɵadvance(2),e.ɵɵproperty("ngForOf",o.options))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,c.NgTemplateOutlet,c.NgStyle,m.Ripple],styles:[`@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}
`],encapsulation:2,changeDetection:0})}return l})(),U=(()=>{class l{static ɵfac=function(i){return new(i||l)};static ɵmod=e.ɵɵdefineNgModule({type:l});static ɵinj=e.ɵɵdefineInjector({imports:[f,y,b,b]})}return l})();export{V as SELECTBUTTON_VALUE_ACCESSOR,D as SelectButton,U as SelectButtonModule};