import*as e from"@angular/core";import"@angular/core";import*as s from"@angular/forms";import{FormsModule as p}from"@angular/forms";import*as r from"@angular/common";import{CommonModule as u}from"@angular/common";import{DomHandler as f}from"primeng/dom";import{Subject as d}from"rxjs";function g(n,l){if(n&1&&(e.ɵɵelementStart(0,"div"),e.ɵɵtext(1),e.ɵɵelementEnd()),n&2){let t=e.ɵɵnextContext();e.ɵɵadvance(1),e.ɵɵtextInterpolate(t.welcomeMessage)}}function h(n,l){if(n&1&&(e.ɵɵelementStart(0,"div")(1,"span",8),e.ɵɵtext(2),e.ɵɵelementEnd(),e.ɵɵelementStart(3,"span",9),e.ɵɵtext(4),e.ɵɵelementEnd(),e.ɵɵelementStart(5,"div",10),e.ɵɵtext(6),e.ɵɵelementEnd()()),n&2){let t=l.$implicit,i=e.ɵɵnextContext();e.ɵɵadvance(2),e.ɵɵtextInterpolate(i.prompt),e.ɵɵadvance(2),e.ɵɵtextInterpolate(t.text),e.ɵɵadvance(1),e.ɵɵattribute("aria-live","polite"),e.ɵɵadvance(1),e.ɵɵtextInterpolate(t.response)}}var v=(()=>{class n{commandSource=new d;responseSource=new d;commandHandler=this.commandSource.asObservable();responseHandler=this.responseSource.asObservable();sendCommand(t){t&&this.commandSource.next(t)}sendResponse(t){t&&this.responseSource.next(t)}static ɵfac=function(i){return new(i||n)};static ɵprov=e.ɵɵdefineInjectable({token:n,factory:n.ɵfac})}return n})(),k=(()=>{class n{el;terminalService;cd;welcomeMessage;prompt;style;styleClass;commands=[];command;container;commandProcessed;subscription;constructor(t,i,o){this.el=t,this.terminalService=i,this.cd=o,this.subscription=i.responseHandler.subscribe(m=>{this.commands[this.commands.length-1].response=m,this.commandProcessed=!0})}ngAfterViewInit(){this.container=f.find(this.el.nativeElement,".p-terminal")[0]}ngAfterViewChecked(){this.commandProcessed&&(this.container.scrollTop=this.container.scrollHeight,this.commandProcessed=!1)}set response(t){t&&(this.commands[this.commands.length-1].response=t,this.commandProcessed=!0)}handleCommand(t){t.keyCode==13&&(this.commands.push({text:this.command}),this.terminalService.sendCommand(this.command),this.command="")}focus(t){t.focus()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static ɵfac=function(i){return new(i||n)(e.ɵɵdirectiveInject(e.ElementRef),e.ɵɵdirectiveInject(v),e.ɵɵdirectiveInject(e.ChangeDetectorRef))};static ɵcmp=e.ɵɵdefineComponent({type:n,selectors:[["p-terminal"]],hostAttrs:[1,"p-element"],inputs:{welcomeMessage:"welcomeMessage",prompt:"prompt",style:"style",styleClass:"styleClass",response:"response"},decls:9,vars:8,consts:[[3,"ngClass","ngStyle","click"],[4,"ngIf"],[1,"p-terminal-content"],[4,"ngFor","ngForOf"],[1,"p-terminal-prompt-container"],[1,"p-terminal-content-prompt"],["type","text","autocomplete","off","autofocus","",1,"p-terminal-input",3,"ngModel","ngModelChange","keydown"],["in",""],[1,"p-terminal-prompt"],[1,"p-terminal-command"],[1,"p-terminal-response"]],template:function(i,o){if(i&1){let m=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",0),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(m);let a=e.ɵɵreference(8);return e.ɵɵresetView(o.focus(a))}),e.ɵɵtemplate(1,g,2,1,"div",1),e.ɵɵelementStart(2,"div",2),e.ɵɵtemplate(3,h,7,4,"div",3),e.ɵɵelementEnd(),e.ɵɵelementStart(4,"div",4)(5,"span",5),e.ɵɵtext(6),e.ɵɵelementEnd(),e.ɵɵelementStart(7,"input",6,7),e.ɵɵlistener("ngModelChange",function(a){return o.command=a})("keydown",function(a){return o.handleCommand(a)}),e.ɵɵelementEnd()()()}i&2&&(e.ɵɵclassMap(o.styleClass),e.ɵɵproperty("ngClass","p-terminal p-component")("ngStyle",o.style),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",o.welcomeMessage),e.ɵɵadvance(2),e.ɵɵproperty("ngForOf",o.commands),e.ɵɵadvance(3),e.ɵɵtextInterpolate(o.prompt),e.ɵɵadvance(1),e.ɵɵproperty("ngModel",o.command))},dependencies:[r.NgClass,r.NgForOf,r.NgIf,r.NgStyle,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel],styles:[`@layer primeng{.p-terminal{height:18rem;overflow:auto}.p-terminal-prompt-container{display:flex;align-items:center}.p-terminal-input{flex:1 1 auto;border:0 none;background-color:transparent;color:inherit;padding:0;outline:0 none}.p-terminal-input::-ms-clear{display:none}}
`],encapsulation:2,changeDetection:0})}return n})(),E=(()=>{class n{static ɵfac=function(i){return new(i||n)};static ɵmod=e.ɵɵdefineNgModule({type:n});static ɵinj=e.ɵɵdefineInjector({imports:[u,p]})}return n})();export{k as Terminal,E as TerminalModule,v as TerminalService};