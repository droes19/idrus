import{style as p,state as m,animate as u,transition as d,trigger as b}from"@angular/animations";import*as r from"@angular/common";import{isPlatformBrowser as h,DOCUMENT as T,CommonModule as v}from"@angular/common";import*as t from"@angular/core";import{PLATFORM_ID as C}from"@angular/core";import*as _ from"primeng/api";import{PrimeTemplate as S,SharedModule as f}from"primeng/api";import{DomHandler as w}from"primeng/dom";import{ChevronUpIcon as g}from"primeng/icons/chevronup";import{ZIndexUtils as c}from"primeng/utils";function x(n,l){if(n&1&&t.ɵɵelement(0,"span",6),n&2){let e=t.ɵɵnextContext(3);t.ɵɵclassMap(e.icon),t.ɵɵproperty("ngClass","p-scrolltop-icon")}}var I=()=>({"font-size":"1rem",scale:"1.5"});function L(n,l){n&1&&t.ɵɵelement(0,"ChevronUpIcon",7),n&2&&t.ɵɵproperty("styleClass","p-scrolltop-icon")("ngStyle",t.ɵɵpureFunction0(2,I))}function k(n,l){if(n&1&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,x,1,3,"span",4)(2,L,1,3,"ChevronUpIcon",5),t.ɵɵelementContainerEnd()),n&2){let e=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",e.icon),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!e.icon)}}function O(n,l){}function E(n,l){if(n&1&&t.ɵɵtemplate(0,O,0,0,"ng-template",8),n&2){let e=t.ɵɵnextContext(2);t.ɵɵproperty("ngIf",!e.icon)}}var D=(n,l)=>({showTransitionParams:n,hideTransitionParams:l}),M=n=>({value:"open",params:n}),P=()=>({styleClass:"p-scrolltop-icon"});function V(n,l){if(n&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",1),t.ɵɵlistener("@animation.start",function(o){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext();return t.ɵɵresetView(s.onEnter(o))})("@animation.done",function(o){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext();return t.ɵɵresetView(s.onLeave(o))})("click",function(){t.ɵɵrestoreView(e);let o=t.ɵɵnextContext();return t.ɵɵresetView(o.onClick())}),t.ɵɵtemplate(1,k,3,2,"ng-container",2)(2,E,1,1,null,3),t.ɵɵelementEnd()}if(n&2){let e=t.ɵɵnextContext();t.ɵɵclassMap(e.styleClass),t.ɵɵproperty("@animation",t.ɵɵpureFunction1(12,M,t.ɵɵpureFunction2(9,D,e.showTransitionOptions,e.hideTransitionOptions)))("ngClass",e.containerClass())("ngStyle",e.style),t.ɵɵattribute("aria-label",e.buttonAriaLabel),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!e.iconTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",e.iconTemplate)("ngTemplateOutletContext",t.ɵɵpureFunction0(14,P))}}var J=(()=>{class n{document;platformId;renderer;el;cd;config;styleClass;style;target="window";threshold=400;icon;behavior="smooth";showTransitionOptions=".15s";hideTransitionOptions=".15s";buttonAriaLabel;templates;iconTemplate;documentScrollListener;parentScrollListener;visible=!1;overlay;window;constructor(e,i,o,s,a,y){this.document=e,this.platformId=i,this.renderer=o,this.el=s,this.cd=a,this.config=y,this.window=this.document.defaultView}ngOnInit(){this.target==="window"?this.bindDocumentScrollListener():this.target==="parent"&&this.bindParentScrollListener()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"icon":this.iconTemplate=e.template;break}})}onClick(){(this.target==="window"?this.window:this.el.nativeElement.parentElement).scroll({top:0,behavior:this.behavior})}onEnter(e){switch(e.toState){case"open":this.overlay=e.element,c.set("overlay",this.overlay,this.config.zIndex.overlay);break;case"void":this.overlay=null;break}}onLeave(e){switch(e.toState){case"void":c.clear(e.element);break}}checkVisibility(e){e>this.threshold?this.visible=!0:this.visible=!1,this.cd.markForCheck()}bindParentScrollListener(){h(this.platformId)&&(this.parentScrollListener=this.renderer.listen(this.el.nativeElement.parentElement,"scroll",()=>{this.checkVisibility(this.el.nativeElement.parentElement.scrollTop)}))}bindDocumentScrollListener(){h(this.platformId)&&(this.documentScrollListener=this.renderer.listen(this.window,"scroll",()=>{this.checkVisibility(w.getWindowScrollTop())}))}unbindParentScrollListener(){this.parentScrollListener&&(this.parentScrollListener(),this.parentScrollListener=null)}unbindDocumentScrollListener(){this.documentScrollListener&&(this.documentScrollListener(),this.documentScrollListener=null)}containerClass(){return{"p-scrolltop p-link p-component":!0,"p-scrolltop-sticky":this.target!=="window"}}ngOnDestroy(){this.target==="window"?this.unbindDocumentScrollListener():this.target==="parent"&&this.unbindParentScrollListener(),this.overlay&&(c.clear(this.overlay),this.overlay=null)}static ɵfac=function(i){return new(i||n)(t.ɵɵdirectiveInject(T),t.ɵɵdirectiveInject(C),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(_.PrimeNGConfig))};static ɵcmp=t.ɵɵdefineComponent({type:n,selectors:[["p-scrollTop"]],contentQueries:function(i,o,s){if(i&1&&t.ɵɵcontentQuery(s,S,4),i&2){let a;t.ɵɵqueryRefresh(a=t.ɵɵloadQuery())&&(o.templates=a)}},hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",target:"target",threshold:"threshold",icon:"icon",behavior:"behavior",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",buttonAriaLabel:"buttonAriaLabel"},decls:1,vars:1,consts:[["type","button",3,"ngClass","class","ngStyle","click",4,"ngIf"],["type","button",3,"ngClass","ngStyle","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class","ngClass",4,"ngIf"],[3,"styleClass","ngStyle",4,"ngIf"],[3,"ngClass"],[3,"styleClass","ngStyle"],[3,"ngIf"]],template:function(i,o){i&1&&t.ɵɵtemplate(0,V,3,15,"button",0),i&2&&t.ɵɵproperty("ngIf",o.visible)},dependencies:()=>[r.NgClass,r.NgIf,r.NgTemplateOutlet,r.NgStyle,g],styles:[`@layer primeng{.p-scrolltop{position:fixed;bottom:20px;right:20px;display:flex;align-items:center;justify-content:center}.p-scrolltop-sticky{position:sticky}.p-scrolltop-sticky.p-link{margin-left:auto}}
`],encapsulation:2,data:{animation:[b("animation",[m("void",p({opacity:0})),m("open",p({opacity:1})),d("void => open",u("{{showTransitionParams}}")),d("open => void",u("{{hideTransitionParams}}"))])]},changeDetection:0})}return n})(),K=(()=>{class n{static ɵfac=function(i){return new(i||n)};static ɵmod=t.ɵɵdefineNgModule({type:n});static ɵinj=t.ɵɵdefineInjector({imports:[v,g,f,f]})}return n})();export{J as ScrollTop,K as ScrollTopModule};