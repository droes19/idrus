import*as r from"@angular/common";import{isPlatformBrowser as f,DOCUMENT as k,CommonModule as V}from"@angular/common";import*as x from"@angular/common/http";import{HttpEventType as u,HttpClientModule as D}from"@angular/common/http";import*as e from"@angular/core";import{EventEmitter as s,PLATFORM_ID as B}from"@angular/core";import*as y from"primeng/api";import{TranslationKeys as d,PrimeTemplate as O,SharedModule as h}from"primeng/api";import*as _ from"primeng/button";import{ButtonModule as g}from"primeng/button";import{DomHandler as m}from"primeng/dom";import{PlusIcon as I}from"primeng/icons/plus";import{TimesIcon as C}from"primeng/icons/times";import{UploadIcon as F}from"primeng/icons/upload";import*as T from"primeng/messages";import{MessagesModule as v}from"primeng/messages";import*as w from"primeng/progressbar";import{ProgressBarModule as b}from"primeng/progressbar";import*as S from"primeng/ripple";import{RippleModule as z}from"primeng/ripple";import*as U from"@angular/platform-browser";var R=["advancedfileinput"],P=["basicfileinput"],j=["content"];function Q(i,l){if(i&1&&e.ɵɵelement(0,"span",18),i&2){let t=e.ɵɵnextContext(2);e.ɵɵclassMap(t.chooseIcon),e.ɵɵproperty("ngClass","p-button-icon p-button-icon-left"),e.ɵɵattribute("aria-label",!0)("data-pc-section","chooseicon")}}function H(i,l){i&1&&e.ɵɵelement(0,"PlusIcon",21),i&2&&(e.ɵɵproperty("styleClass","p-button-icon p-button-icon-left"),e.ɵɵattribute("aria-label",!0)("data-pc-section","chooseicon"))}function N(i,l){}function A(i,l){i&1&&e.ɵɵtemplate(0,N,0,0,"ng-template")}function W(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",22),e.ɵɵtemplate(1,A,1,0,null,11),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵattribute("aria-label",!0)("data-pc-section","chooseicon"),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.chooseIconTemplate)}}function $(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,H,1,3,"PlusIcon",19)(2,W,2,3,"span",20),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(2);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.chooseIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.chooseIconTemplate)}}function q(i,l){if(i&1&&e.ɵɵelement(0,"span",25),i&2){let t=e.ɵɵnextContext(3);e.ɵɵproperty("ngClass",t.uploadIcon),e.ɵɵattribute("aria-hidden",!0)}}function K(i,l){i&1&&e.ɵɵelement(0,"UploadIcon",21),i&2&&e.ɵɵproperty("styleClass","p-button-icon p-button-icon-left")}function Z(i,l){}function G(i,l){i&1&&e.ɵɵtemplate(0,Z,0,0,"ng-template")}function Y(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",22),e.ɵɵtemplate(1,G,1,0,null,11),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(4);e.ɵɵattribute("aria-hidden",!0),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.uploadIconTemplate)}}function J(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,K,1,1,"UploadIcon",19)(2,Y,2,2,"span",20),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.uploadIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.uploadIconTemplate)}}function X(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"p-button",23),e.ɵɵlistener("onClick",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext(2);return e.ɵɵresetView(a.upload())}),e.ɵɵtemplate(1,q,1,2,"span",24)(2,J,3,2,"ng-container",8),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("label",t.uploadButtonLabel)("disabled",!t.hasFiles()||t.isFileLimitExceeded())("styleClass",t.uploadStyleClass),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.uploadIcon),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.uploadIcon)}}function ee(i,l){if(i&1&&e.ɵɵelement(0,"span",25),i&2){let t=e.ɵɵnextContext(3);e.ɵɵproperty("ngClass",t.cancelIcon)}}function te(i,l){i&1&&e.ɵɵelement(0,"TimesIcon",21),i&2&&(e.ɵɵproperty("styleClass","p-button-icon p-button-icon-left"),e.ɵɵattribute("aria-hidden",!0))}function ie(i,l){}function ne(i,l){i&1&&e.ɵɵtemplate(0,ie,0,0,"ng-template")}function ae(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",22),e.ɵɵtemplate(1,ne,1,0,null,11),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(4);e.ɵɵattribute("aria-hidden",!0),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.cancelIconTemplate)}}function le(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,te,1,2,"TimesIcon",19)(2,ae,2,2,"span",20),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.cancelIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.cancelIconTemplate)}}function oe(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"p-button",23),e.ɵɵlistener("onClick",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext(2);return e.ɵɵresetView(a.clear())}),e.ɵɵtemplate(1,ee,1,1,"span",24)(2,le,3,2,"ng-container",8),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("label",t.cancelButtonLabel)("disabled",!t.hasFiles()||t.uploading)("styleClass",t.cancelStyleClass),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.cancelIcon),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.cancelIcon)}}function se(i,l){i&1&&e.ɵɵelementContainer(0)}function re(i,l){if(i&1&&e.ɵɵelement(0,"p-progressBar",26),i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("value",t.progress)("showValue",!1)}}function pe(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"img",33),e.ɵɵlistener("error",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext(5);return e.ɵɵresetView(o.imageError(a))}),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵnextContext().$implicit,n=e.ɵɵnextContext(4);e.ɵɵproperty("src",t.objectURL,e.ɵɵsanitizeUrl)("width",n.previewWidth)}}function ce(i,l){i&1&&e.ɵɵelement(0,"TimesIcon")}function de(i,l){}function _e(i,l){i&1&&e.ɵɵtemplate(0,de,0,0,"ng-template")}function ue(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",29)(1,"div"),e.ɵɵtemplate(2,pe,1,2,"img",30),e.ɵɵelementEnd(),e.ɵɵelementStart(3,"div",31),e.ɵɵtext(4),e.ɵɵelementEnd(),e.ɵɵelementStart(5,"div"),e.ɵɵtext(6),e.ɵɵelementEnd(),e.ɵɵelementStart(7,"div")(8,"button",32),e.ɵɵlistener("click",function(a){let p=e.ɵɵrestoreView(t).index,c=e.ɵɵnextContext(4);return e.ɵɵresetView(c.remove(a,p))}),e.ɵɵtemplate(9,ce,1,0,"TimesIcon",8)(10,_e,1,0,null,11),e.ɵɵelementEnd()()()}if(i&2){let t=l.$implicit,n=e.ɵɵnextContext(4);e.ɵɵadvance(2),e.ɵɵproperty("ngIf",n.isImage(t)),e.ɵɵadvance(2),e.ɵɵtextInterpolate(t.name),e.ɵɵadvance(2),e.ɵɵtextInterpolate(n.formatSize(t.size)),e.ɵɵadvance(2),e.ɵɵclassMap(n.removeStyleClass),e.ɵɵproperty("disabled",n.uploading),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!n.cancelIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",n.cancelIconTemplate)}}function me(i,l){if(i&1&&(e.ɵɵelementStart(0,"div"),e.ɵɵtemplate(1,ue,11,8,"div",28),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngForOf",t.files)}}function fe(i,l){}function he(i,l){if(i&1&&(e.ɵɵelementStart(0,"div"),e.ɵɵtemplate(1,fe,0,0,"ng-template",34),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngForOf",t.files)("ngForTemplate",t.fileTemplate)}}function ge(i,l){if(i&1&&(e.ɵɵelementStart(0,"div",27),e.ɵɵtemplate(1,me,2,1,"div",8)(2,he,2,2,"div",8),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(2);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.fileTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.fileTemplate)}}function ve(i,l){i&1&&e.ɵɵelementContainer(0)}var be=(i,l)=>({"p-focus":i,"p-disabled":l}),xe=i=>({$implicit:i});function ye(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",2)(1,"div",3)(2,"span",4),e.ɵɵlistener("focus",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext();return e.ɵɵresetView(a.onFocus())})("blur",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext();return e.ɵɵresetView(a.onBlur())})("click",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext();return e.ɵɵresetView(a.choose())})("keydown.enter",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext();return e.ɵɵresetView(a.choose())}),e.ɵɵelementStart(3,"input",5,6),e.ɵɵlistener("change",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onFileSelect(a))}),e.ɵɵelementEnd(),e.ɵɵtemplate(5,Q,1,5,"span",7)(6,$,3,2,"ng-container",8),e.ɵɵelementStart(7,"span",9),e.ɵɵtext(8),e.ɵɵelementEnd()(),e.ɵɵtemplate(9,X,3,5,"p-button",10)(10,oe,3,5,"p-button",10)(11,se,1,0,"ng-container",11),e.ɵɵelementEnd(),e.ɵɵelementStart(12,"div",12,13),e.ɵɵlistener("dragenter",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onDragEnter(a))})("dragleave",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onDragLeave(a))})("drop",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onDrop(a))}),e.ɵɵtemplate(14,re,1,2,"p-progressBar",14),e.ɵɵelement(15,"p-messages",15),e.ɵɵtemplate(16,ge,3,2,"div",16)(17,ve,1,0,"ng-container",17),e.ɵɵelementEnd()()}if(i&2){let t=e.ɵɵnextContext();e.ɵɵclassMap(t.styleClass),e.ɵɵproperty("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",t.style),e.ɵɵattribute("data-pc-name","fileupload")("data-pc-section","root"),e.ɵɵadvance(1),e.ɵɵattribute("data-pc-section","buttonbar"),e.ɵɵadvance(1),e.ɵɵclassMap(t.chooseStyleClass),e.ɵɵproperty("ngClass",e.ɵɵpureFunction2(30,be,t.focus,t.disabled||t.isChooseDisabled())),e.ɵɵattribute("data-pc-section","choosebutton"),e.ɵɵadvance(1),e.ɵɵproperty("multiple",t.multiple)("accept",t.accept)("disabled",t.disabled||t.isChooseDisabled()),e.ɵɵattribute("title","")("data-pc-section","input"),e.ɵɵadvance(2),e.ɵɵproperty("ngIf",t.chooseIcon),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.chooseIcon),e.ɵɵadvance(1),e.ɵɵattribute("data-pc-section","choosebuttonlabel"),e.ɵɵadvance(1),e.ɵɵtextInterpolate(t.chooseButtonLabel),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.auto&&t.showUploadButton),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.auto&&t.showCancelButton),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.toolbarTemplate),e.ɵɵadvance(1),e.ɵɵattribute("data-pc-section","content"),e.ɵɵadvance(2),e.ɵɵproperty("ngIf",t.hasFiles()),e.ɵɵadvance(1),e.ɵɵproperty("value",t.msgs)("enableService",!1),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.hasFiles()),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",e.ɵɵpureFunction1(33,xe,t.files))}}function Ie(i,l){if(i&1&&e.ɵɵelement(0,"span",25),i&2){let t=e.ɵɵnextContext(3);e.ɵɵproperty("ngClass",t.uploadIcon)}}function Ce(i,l){i&1&&e.ɵɵelement(0,"UploadIcon",21),i&2&&e.ɵɵproperty("styleClass","p-button-icon p-button-icon-left")}function Fe(i,l){}function Te(i,l){i&1&&e.ɵɵtemplate(0,Fe,0,0,"ng-template")}function we(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",22),e.ɵɵtemplate(1,Te,1,0,null,11),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(4);e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.uploadIconTemplate)}}function Se(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,Ce,1,1,"UploadIcon",19)(2,we,2,1,"span",20),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.uploadIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.uploadIconTemplate)}}function Ue(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,Ie,1,1,"span",24)(2,Se,3,2,"ng-container",8),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(2);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.uploadIcon),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.uploadIcon)}}function Ee(i,l){if(i&1&&e.ɵɵelement(0,"span",42),i&2){let t=e.ɵɵnextContext(3);e.ɵɵproperty("ngClass",t.chooseIcon)}}function Le(i,l){i&1&&e.ɵɵelement(0,"PlusIcon",21),i&2&&(e.ɵɵproperty("styleClass","p-button-icon p-button-icon-left pi"),e.ɵɵattribute("aria-hidden",!0)("data-pc-section","uploadicon"))}function Me(i,l){}function ke(i,l){i&1&&e.ɵɵtemplate(0,Me,0,0,"ng-template")}function Ve(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",44),e.ɵɵtemplate(1,ke,1,0,null,11),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(4);e.ɵɵattribute("aria-hidden",!0)("data-pc-section","uploadicon"),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t.chooseIconTemplate)}}function De(i,l){if(i&1&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,Le,1,3,"PlusIcon",19)(2,Ve,2,3,"span",43),e.ɵɵelementContainerEnd()),i&2){let t=e.ɵɵnextContext(3);e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.chooseIconTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",t.chooseIconTemplate)}}function Be(i,l){if(i&1&&e.ɵɵtemplate(0,Ee,1,1,"span",41)(1,De,3,2,"ng-container",8),i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("ngIf",t.chooseIcon),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!t.chooseIcon)}}function Oe(i,l){if(i&1&&(e.ɵɵelementStart(0,"span",9),e.ɵɵtext(1),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext(2);e.ɵɵattribute("data-pc-section","label"),e.ɵɵadvance(1),e.ɵɵtextInterpolate(t.basicButtonLabel)}}function ze(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"input",45,46),e.ɵɵlistener("change",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext(2);return e.ɵɵresetView(o.onFileSelect(a))})("focus",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext(2);return e.ɵɵresetView(a.onFocus())})("blur",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext(2);return e.ɵɵresetView(a.onBlur())}),e.ɵɵelementEnd()}if(i&2){let t=e.ɵɵnextContext(2);e.ɵɵproperty("accept",t.accept)("multiple",t.multiple)("disabled",t.disabled),e.ɵɵattribute("data-pc-section","input")}}var Re=(i,l,t,n)=>({"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":l,"p-focus":t,"p-disabled":n});function Pe(i,l){if(i&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",35),e.ɵɵelement(1,"p-messages",15),e.ɵɵelementStart(2,"span",36),e.ɵɵlistener("click",function(){e.ɵɵrestoreView(t);let a=e.ɵɵnextContext();return e.ɵɵresetView(a.onBasicUploaderClick())})("keydown",function(a){e.ɵɵrestoreView(t);let o=e.ɵɵnextContext();return e.ɵɵresetView(o.onBasicKeydown(a))}),e.ɵɵtemplate(3,Ue,3,2,"ng-container",37)(4,Be,2,2,"ng-template",null,38,e.ɵɵtemplateRefExtractor)(6,Oe,2,2,"span",39)(7,ze,2,4,"input",40),e.ɵɵelementEnd()()}if(i&2){let t=e.ɵɵreference(5),n=e.ɵɵnextContext();e.ɵɵattribute("data-pc-name","fileupload"),e.ɵɵadvance(1),e.ɵɵproperty("value",n.msgs)("enableService",!1),e.ɵɵadvance(1),e.ɵɵclassMap(n.styleClass),e.ɵɵproperty("ngClass",e.ɵɵpureFunction4(12,Re,!n.basicButtonLabel,n.hasFiles(),n.focus,n.disabled))("ngStyle",n.style),e.ɵɵattribute("data-pc-section","choosebutton"),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",n.hasFiles()&&!n.auto)("ngIfElse",t),e.ɵɵadvance(3),e.ɵɵproperty("ngIf",n.basicButtonLabel),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!n.hasFiles())}}var st=(()=>{class i{document;platformId;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new s;onSend=new s;onUpload=new s;onError=new s;onClear=new s;onRemove=new s;onSelect=new s;onProgress=new s;uploadHandler=new s;onImageError=new s;templates;advancedFileInput;basicFileInput;content;set files(t){this._files=[];for(let n=0;n<t.length;n++){let a=t[n];this.validate(a)&&(this.isImage(a)&&(a.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(t[n]))),this._files.push(t[n]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;constructor(t,n,a,o,p,c,E,L,M){this.document=t,this.platformId=n,this.renderer=a,this.el=o,this.sanitizer=p,this.zone=c,this.http=E,this.cd=L,this.config=M}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"file":this.fileTemplate=t.template;break;case"content":this.contentTemplate=t.template;break;case"toolbar":this.toolbarTemplate=t.template;break;case"chooseicon":this.chooseIconTemplate=t.template;break;case"uploadicon":this.uploadIconTemplate=t.template;break;case"cancelicon":this.cancelIconTemplate=t.template;break;default:this.fileTemplate=t.template;break}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){f(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(t){return this.config.getTranslation(t)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(t){if(t.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let n=t.dataTransfer?t.dataTransfer.files:t.target.files;for(let a=0;a<n.length;a++){let o=n[a];this.isFileSelected(o)||this.validate(o)&&(this.isImage(o)&&(o.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[a]))),this.files.push(n[a]))}this.onSelect.emit({originalEvent:t,files:n,currentFiles:this.files}),this.fileLimit&&this.checkFileLimit(),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),t.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(t){for(let n of this.files)if(n.name+n.type+n.size===t.name+t.type+t.size)return!0;return!1}isIE11(){if(f(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(t){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(t)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",t.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):this.maxFileSize&&t.size>this.maxFileSize?(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",t.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),!1):!0}isFileTypeValid(t){let n=this.accept?.split(",").map(a=>a.trim());for(let a of n)if(this.isWildcard(a)?this.getTypeClass(t.type)===this.getTypeClass(a):t.type==a||this.getFileExtension(t).toLowerCase()===a.toLowerCase())return!0;return!1}getTypeClass(t){return t.substring(0,t.indexOf("/"))}isWildcard(t){return t.indexOf("*")!==-1}getFileExtension(t){return"."+t.name.split(".").pop()}isImage(t){return /^image\//.test(t.type)}onImageLoad(t){window.URL.revokeObjectURL(t.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let t=new FormData;this.onBeforeUpload.emit({formData:t});for(let n=0;n<this.files.length;n++)t.append(this.name,this.files[n],this.files[n].name);this.http.request(this.method,this.url,{body:t,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case u.Sent:this.onSend.emit({originalEvent:n,formData:t});break;case u.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case u.UploadProgress:{n.loaded&&(this.progress=Math.round(n.loaded*100/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress});break}}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.uploadedFileCount=0,this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(t,n){this.clearInputElement(),this.onRemove.emit({originalEvent:t,file:this.files[n]}),this.files.splice(n,1),this.checkFileLimit()}isFileLimitExceeded(){let n=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=n&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<n}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.msgs??=[],this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(t){this.disabled||(t.stopPropagation(),t.preventDefault())}onDragOver(t){this.disabled||(m.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,t.stopPropagation(),t.preventDefault())}onDragLeave(t){this.disabled||m.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(t){if(!this.disabled){m.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),t.stopPropagation(),t.preventDefault();let n=t.dataTransfer?t.dataTransfer.files:t.target.files;(this.multiple||n&&n.length===1)&&this.onFileSelect(t)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(t){let o=this.getTranslation(d.FILE_SIZE_TYPES);if(t===0)return`0 ${o[0]}`;let p=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,p)).toFixed(3)} ${o[p]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(t){switch(t.code){case"Space":case"Enter":this.onBasicUploaderClick(),t.preventDefault();break}}imageError(t){this.onImageError.emit(t)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(d.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(d.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(d.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static ɵfac=function(n){return new(n||i)(e.ɵɵdirectiveInject(k),e.ɵɵdirectiveInject(B),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(e.ElementRef),e.ɵɵdirectiveInject(U.DomSanitizer),e.ɵɵdirectiveInject(e.NgZone),e.ɵɵdirectiveInject(x.HttpClient),e.ɵɵdirectiveInject(e.ChangeDetectorRef),e.ɵɵdirectiveInject(y.PrimeNGConfig))};static ɵcmp=e.ɵɵdefineComponent({type:i,selectors:[["p-fileUpload"]],contentQueries:function(n,a,o){if(n&1&&e.ɵɵcontentQuery(o,O,4),n&2){let p;e.ɵɵqueryRefresh(p=e.ɵɵloadQuery())&&(a.templates=p)}},viewQuery:function(n,a){if(n&1&&(e.ɵɵviewQuery(R,5),e.ɵɵviewQuery(P,5),e.ɵɵviewQuery(j,5)),n&2){let o;e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(a.advancedFileInput=o.first),e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(a.basicFileInput=o.first),e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(a.content=o.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass","class",4,"ngIf"],[4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"label","disabled","styleClass","onClick"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width","error",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"disabled","click"],[3,"src","width","error"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","click","keydown"],[4,"ngIf","ngIfElse"],["chooseSection",""],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(n,a){n&1&&e.ɵɵtemplate(0,ye,18,35,"div",0)(1,Pe,8,17,"div",1),n&2&&(e.ɵɵproperty("ngIf",a.mode==="advanced"),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",a.mode==="basic"))},dependencies:()=>[r.NgClass,r.NgForOf,r.NgIf,r.NgTemplateOutlet,r.NgStyle,_.ButtonDirective,_.Button,w.ProgressBar,T.Messages,S.Ripple,I,F,C],styles:[`@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}
`],encapsulation:2,changeDetection:0})}return i})(),rt=(()=>{class i{static ɵfac=function(n){return new(n||i)};static ɵmod=e.ɵɵdefineNgModule({type:i});static ɵinj=e.ɵɵdefineInjector({imports:[V,D,h,g,b,v,z,I,F,C,h,g,b,v]})}return i})();export{st as FileUpload,rt as FileUploadModule};