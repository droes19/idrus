import*as i from"@angular/core";import{forwardRef as r,EventEmitter as u}from"@angular/core";import*as o from"@angular/common";import{CommonModule as p}from"@angular/common";import{InputTextModule as d}from"primeng/inputtext";import{NG_VALUE_ACCESSOR as h}from"@angular/forms";var m=["inputfield"],c=l=>({"ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default":!0,"ui-state-disabled":l}),f=l=>({"ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default":!0,"ui-state-disabled":l}),g={provide:h,useExisting:r(()=>S),multi:!0},S=(()=>{class l{el;cd;onChange=new u;onFocus=new u;onBlur=new u;min;max;maxlength;size;placeholder;inputId;disabled;readonly;tabindex;required;name;ariaLabelledBy;inputStyle;inputStyleClass;formatInput;decimalSeparator;thousandSeparator;precision;value;_step=1;formattedValue;onModelChange=()=>{};onModelTouched=()=>{};keyPattern=/[0-9\+\-]/;timer;focus;filled;negativeSeparator="-";localeDecimalSeparator;localeThousandSeparator;thousandRegExp;calculatedPrecision;inputfieldViewChild;get step(){return this._step}set step(e){if(this._step=e,this._step!=null){let n=this.step.toString().split(/[,]|[.]/);this.calculatedPrecision=n[1]?n[1].length:void 0}}constructor(e,n){this.el=e,this.cd=n}ngOnInit(){this.formatInput&&(this.localeDecimalSeparator=1.1.toLocaleString().substring(1,2),this.localeThousandSeparator=1e3.toLocaleString().substring(1,2),this.thousandRegExp=new RegExp(`[${this.thousandSeparator||this.localeThousandSeparator}]`,"gim"),this.decimalSeparator&&this.thousandSeparator&&this.decimalSeparator===this.thousandSeparator&&console.warn("thousandSeparator and decimalSeparator cannot have the same value."))}repeat(e,n,t){let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,t)},s),this.spin(e,t)}spin(e,n){let t=this.step*n,s,a=this.getPrecision();this.value?s=typeof this.value=="string"?this.parseValue(this.value):this.value:s=0,a?this.value=parseFloat(this.toFixed(s+t,a)):this.value=s+t,this.maxlength!==void 0&&this.value.toString().length>this.maxlength&&(this.value=s),this.min!==void 0&&this.value<this.min&&(this.value=this.min),this.max!==void 0&&this.value>this.max&&(this.value=this.max),this.formatValue(),this.onModelChange(this.value),this.onChange.emit(e)}getPrecision(){return this.precision===void 0?this.calculatedPrecision:this.precision}toFixed(e,n){let t=Math.pow(10,n||0);return String(Math.round(e*t)/t)}onUpButtonMousedown(e){this.disabled||(this.inputfieldViewChild.nativeElement.focus(),this.repeat(e,null,1),this.updateFilledState(),e.preventDefault())}onUpButtonMouseup(e){this.disabled||this.clearTimer()}onUpButtonMouseleave(e){this.disabled||this.clearTimer()}onDownButtonMousedown(e){this.disabled||(this.inputfieldViewChild.nativeElement.focus(),this.repeat(e,null,-1),this.updateFilledState(),e.preventDefault())}onDownButtonMouseup(e){this.disabled||this.clearTimer()}onDownButtonMouseleave(e){this.disabled||this.clearTimer()}onInputKeydown(e){e.which==38?(this.spin(e,1),e.preventDefault()):e.which==40&&(this.spin(e,-1),e.preventDefault())}onInputChange(e){this.onChange.emit(e)}onInput(e){this.value=this.parseValue(e.target.value),this.onModelChange(this.value),this.updateFilledState()}onInputBlur(e){this.focus=!1,this.formatValue(),this.onModelTouched(),this.onBlur.emit(e)}onInputFocus(e){this.focus=!0,this.onFocus.emit(e)}parseValue(e){let n,t=this.getPrecision();return e.trim()===""?n=null:(this.formatInput&&(e=e.replace(this.thousandRegExp,"")),t?(e=this.formatInput?e.replace(this.decimalSeparator||this.localeDecimalSeparator,"."):e.replace(",","."),n=parseFloat(e)):n=parseInt(e,10),isNaN(n)?n=null:(this.max!==null&&n>this.max&&(n=this.max),this.min!==null&&n<this.min&&(n=this.min))),n}formatValue(){let e=this.value,n=this.getPrecision();e!=null?(this.formatInput&&(e=e.toLocaleString(void 0,{maximumFractionDigits:20}),this.decimalSeparator&&this.thousandSeparator&&(e=e.split(this.localeDecimalSeparator),n&&e[1]&&(e[1]=(this.decimalSeparator||this.localeDecimalSeparator)+e[1]),this.thousandSeparator&&e[0].length>3&&(e[0]=e[0].replace(new RegExp(`[${this.localeThousandSeparator}]`,"gim"),this.thousandSeparator)),e=e.join(""))),this.formattedValue=e.toString()):this.formattedValue=null,this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.formattedValue)}clearTimer(){this.timer&&clearInterval(this.timer)}writeValue(e){this.value=e,this.formatValue(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}updateFilledState(){this.filled=this.value!==void 0&&this.value!=null}static ɵfac=function(n){return new(n||l)(i.ɵɵdirectiveInject(i.ElementRef),i.ɵɵdirectiveInject(i.ChangeDetectorRef))};static ɵcmp=i.ɵɵdefineComponent({type:l,selectors:[["p-spinner"]],viewQuery:function(n,t){if(n&1&&i.ɵɵviewQuery(m,5),n&2){let s;i.ɵɵqueryRefresh(s=i.ɵɵloadQuery())&&(t.inputfieldViewChild=s.first)}},hostAttrs:[1,"p-element"],hostVars:4,hostBindings:function(n,t){n&2&&i.ɵɵclassProp("ui-inputwrapper-filled",t.filled)("ui-inputwrapper-focus",t.focus)},inputs:{min:"min",max:"max",maxlength:"maxlength",size:"size",placeholder:"placeholder",inputId:"inputId",disabled:"disabled",readonly:"readonly",tabindex:"tabindex",required:"required",name:"name",ariaLabelledBy:"ariaLabelledBy",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",formatInput:"formatInput",decimalSeparator:"decimalSeparator",thousandSeparator:"thousandSeparator",precision:"precision",step:"step"},outputs:{onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"},features:[i.ɵɵProvidersFeature([g])],decls:7,vars:28,consts:[[1,"ui-spinner","ui-widget","ui-corner-all"],["type","text",3,"value","disabled","readonly","ngStyle","ngClass","keydown","blur","input","change","focus"],["inputfield",""],["type","button","tabindex","-1",3,"ngClass","disabled","mouseleave","mousedown","mouseup"],[1,"ui-spinner-button-icon","pi","pi-caret-up","ui-clickable"],[1,"ui-spinner-button-icon","pi","pi-caret-down","ui-clickable"]],template:function(n,t){n&1&&(i.ɵɵelementStart(0,"span",0)(1,"input",1,2),i.ɵɵlistener("keydown",function(a){return t.onInputKeydown(a)})("blur",function(a){return t.onInputBlur(a)})("input",function(a){return t.onInput(a)})("change",function(a){return t.onInputChange(a)})("focus",function(a){return t.onInputFocus(a)}),i.ɵɵelementEnd(),i.ɵɵelementStart(3,"button",3),i.ɵɵlistener("mouseleave",function(a){return t.onUpButtonMouseleave(a)})("mousedown",function(a){return t.onUpButtonMousedown(a)})("mouseup",function(a){return t.onUpButtonMouseup(a)}),i.ɵɵelement(4,"span",4),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"button",3),i.ɵɵlistener("mouseleave",function(a){return t.onDownButtonMouseleave(a)})("mousedown",function(a){return t.onDownButtonMousedown(a)})("mouseup",function(a){return t.onDownButtonMouseup(a)}),i.ɵɵelement(6,"span",5),i.ɵɵelementEnd()()),n&2&&(i.ɵɵadvance(1),i.ɵɵclassMap(t.inputStyleClass),i.ɵɵproperty("value",t.formattedValue||null)("disabled",t.disabled)("readonly",t.readonly)("ngStyle",t.inputStyle)("ngClass","ui-spinner-input ui-inputtext ui-widget ui-state-default ui-corner-all"),i.ɵɵattribute("id",t.inputId)("name",t.name)("aria-valumin",t.min)("aria-valuemax",t.max)("aria-valuenow",t.value)("aria-labelledby",t.ariaLabelledBy)("size",t.size)("maxlength",t.maxlength)("tabindex",t.tabindex)("placeholder",t.placeholder)("required",t.required),i.ɵɵadvance(2),i.ɵɵproperty("ngClass",i.ɵɵpureFunction1(24,c,t.disabled))("disabled",t.disabled||t.readonly),i.ɵɵattribute("readonly",t.readonly),i.ɵɵadvance(2),i.ɵɵproperty("ngClass",i.ɵɵpureFunction1(26,f,t.disabled))("disabled",t.disabled||t.readonly),i.ɵɵattribute("readonly",t.readonly))},dependencies:[o.NgClass,o.NgStyle],styles:[`@layer primeng{.ui-spinner{display:inline-block;overflow:visible;padding:0;position:relative;vertical-align:middle}.ui-spinner-input{vertical-align:middle;padding-right:1.5em}.ui-spinner-button{cursor:default;display:block;height:50%;margin:0;overflow:hidden;padding:0;position:absolute;right:0;text-align:center;vertical-align:middle;width:1.5em}.ui-spinner .ui-spinner-button-icon{position:absolute;top:50%;left:50%;margin-top:-.5em;margin-left:-.5em;width:1em}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-fluid .ui-spinner{width:100%}.ui-fluid .ui-spinner .ui-spinner-input{padding-right:2em;width:100%}.ui-fluid .ui-spinner .ui-spinner-button{width:1.5em}.ui-fluid .ui-spinner .ui-spinner-button .ui-spinner-button-icon{left:.7em}}
`],encapsulation:2,changeDetection:0})}return l})(),D=(()=>{class l{static ɵfac=function(n){return new(n||l)};static ɵmod=i.ɵɵdefineNgModule({type:l});static ɵinj=i.ɵɵdefineInjector({imports:[p,d]})}return l})();export{g as SPINNER_VALUE_ACCESSOR,S as Spinner,D as SpinnerModule};