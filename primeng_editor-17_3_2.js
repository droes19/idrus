var E=Object.defineProperty;var g=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var y=(i,l,t)=>l in i?E(i,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[l]=t,u=(i,l)=>{for(var t in l||={})C.call(l,t)&&y(i,t,l[t]);if(g)for(var t of g(l))v.call(l,t)&&y(i,t,l[t]);return i};import*as e from"@angular/core";import{forwardRef as q,EventEmitter as c,PLATFORM_ID as S}from"@angular/core";import*as r from"@angular/common";import{isPlatformBrowser as h,CommonModule as T}from"@angular/common";import{Header as I,PrimeTemplate as M,SharedModule as _}from"primeng/api";import{DomHandler as p}from"primeng/dom";import{NG_VALUE_ACCESSOR as x}from"@angular/forms";import Q from"quill";function O(i,l){i&1&&e.ɵɵelementContainer(0)}function w(i,l){if(i&1&&(e.ɵɵelementStart(0,"div",3),e.ɵɵprojection(1),e.ɵɵtemplate(2,O,1,0,"ng-container",4),e.ɵɵelementEnd()),i&2){let t=e.ɵɵnextContext();e.ɵɵadvance(2),e.ɵɵproperty("ngTemplateOutlet",t.headerTemplate)}}function D(i,l){i&1&&(e.ɵɵelementStart(0,"div",3)(1,"span",5)(2,"select",6)(3,"option",7),e.ɵɵtext(4,"Heading"),e.ɵɵelementEnd(),e.ɵɵelementStart(5,"option",8),e.ɵɵtext(6,"Subheading"),e.ɵɵelementEnd(),e.ɵɵelementStart(7,"option",9),e.ɵɵtext(8,"Normal"),e.ɵɵelementEnd()(),e.ɵɵelementStart(9,"select",10)(10,"option",9),e.ɵɵtext(11,"Sans Serif"),e.ɵɵelementEnd(),e.ɵɵelementStart(12,"option",11),e.ɵɵtext(13,"Serif"),e.ɵɵelementEnd(),e.ɵɵelementStart(14,"option",12),e.ɵɵtext(15,"Monospace"),e.ɵɵelementEnd()()(),e.ɵɵelementStart(16,"span",5),e.ɵɵelement(17,"button",13)(18,"button",14)(19,"button",15),e.ɵɵelementEnd(),e.ɵɵelementStart(20,"span",5),e.ɵɵelement(21,"select",16)(22,"select",17),e.ɵɵelementEnd(),e.ɵɵelementStart(23,"span",5),e.ɵɵelement(24,"button",18)(25,"button",19),e.ɵɵelementStart(26,"select",20),e.ɵɵelement(27,"option",9),e.ɵɵelementStart(28,"option",21),e.ɵɵtext(29,"center"),e.ɵɵelementEnd(),e.ɵɵelementStart(30,"option",22),e.ɵɵtext(31,"right"),e.ɵɵelementEnd(),e.ɵɵelementStart(32,"option",23),e.ɵɵtext(33,"justify"),e.ɵɵelementEnd()()(),e.ɵɵelementStart(34,"span",5),e.ɵɵelement(35,"button",24)(36,"button",25)(37,"button",26),e.ɵɵelementEnd(),e.ɵɵelementStart(38,"span",5),e.ɵɵelement(39,"button",27),e.ɵɵelementEnd()())}var A=[[["p-header"]]],k=["p-header"],R={provide:x,useExisting:q(()=>j),multi:!0},j=(()=>{class i{platformId;el;style;styleClass;placeholder;formats;modules;bounds;scrollingContainer;debug;get readonly(){return this._readonly}set readonly(t){this._readonly=t}onInit=new c;onTextChange=new c;onSelectionChange=new c;templates;toolbar;value;delayedCommand=null;_readonly=!1;onModelChange=()=>{};onModelTouched=()=>{};quill;headerTemplate;get isAttachedQuillEditorToDOM(){return this.quillElements?.editorElement?.isConnected}quillElements;constructor(t,n){this.platformId=t,this.el=n}ngAfterViewInit(){h(this.platformId)&&(this.initQuillElements(),this.isAttachedQuillEditorToDOM&&this.initQuillEditor())}ngAfterViewChecked(){h(this.platformId)&&(!this.quill&&this.isAttachedQuillEditorToDOM&&this.initQuillEditor(),this.delayedCommand&&this.isAttachedQuillEditorToDOM&&(this.delayedCommand(),this.delayedCommand=null))}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break}})}writeValue(t){if(this.value=t,this.quill)if(t){let n=()=>{this.quill.setContents(this.quill.clipboard.convert(this.value))};this.isAttachedQuillEditorToDOM?n():this.delayedCommand=n}else{let n=()=>{this.quill.setText("")};this.isAttachedQuillEditorToDOM?n():this.delayedCommand=n}}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}getQuill(){return this.quill}initQuillEditor(){this.initQuillElements();let{toolbarElement:t,editorElement:n}=this.quillElements,o={toolbar:t},s=this.modules?u(u({},o),this.modules):o;this.quill=new Q(n,{modules:s,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer}),this.value&&this.quill.setContents(this.quill.clipboard.convert(this.value)),this.quill.on("text-change",(a,f,d)=>{if(d==="user"){let m=p.findSingle(n,".ql-editor").innerHTML,b=this.quill.getText().trim();m==="<p><br></p>"&&(m=null),this.onTextChange.emit({htmlValue:m,textValue:b,delta:a,source:d}),this.onModelChange(m),this.onModelTouched()}}),this.quill.on("selection-change",(a,f,d)=>{this.onSelectionChange.emit({range:a,oldRange:f,source:d})}),this.onInit.emit({editor:this.quill})}initQuillElements(){h(this.platformId)&&(this.quillElements||(this.quillElements={editorElement:p.findSingle(this.el.nativeElement,"div.p-editor-content"),toolbarElement:p.findSingle(this.el.nativeElement,"div.p-editor-toolbar")}))}static ɵfac=function(n){return new(n||i)(e.ɵɵdirectiveInject(S),e.ɵɵdirectiveInject(e.ElementRef))};static ɵcmp=e.ɵɵdefineComponent({type:i,selectors:[["p-editor"]],contentQueries:function(n,o,s){if(n&1&&(e.ɵɵcontentQuery(s,I,5),e.ɵɵcontentQuery(s,M,4)),n&2){let a;e.ɵɵqueryRefresh(a=e.ɵɵloadQuery())&&(o.toolbar=a.first),e.ɵɵqueryRefresh(a=e.ɵɵloadQuery())&&(o.templates=a)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onInit:"onInit",onTextChange:"onTextChange",onSelectionChange:"onSelectionChange"},features:[e.ɵɵProvidersFeature([R])],ngContentSelectors:k,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(n,o){n&1&&(e.ɵɵprojectionDef(A),e.ɵɵelementStart(0,"div",0),e.ɵɵtemplate(1,w,3,1,"div",1)(2,D,40,0,"div",1),e.ɵɵelement(3,"div",2),e.ɵɵelementEnd()),n&2&&(e.ɵɵclassMap(o.styleClass),e.ɵɵproperty("ngClass","p-editor-container"),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",o.toolbar||o.headerTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!o.toolbar&&!o.headerTemplate),e.ɵɵadvance(1),e.ɵɵproperty("ngStyle",o.style))},dependencies:[r.NgClass,r.NgIf,r.NgTemplateOutlet,r.NgStyle],styles:[`.p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}
`],encapsulation:2,changeDetection:0})}return i})(),$=(()=>{class i{static ɵfac=function(n){return new(n||i)};static ɵmod=e.ɵɵdefineNgModule({type:i});static ɵinj=e.ɵɵdefineInjector({imports:[T,_]})}return i})();export{R as EDITOR_VALUE_ACCESSOR,j as Editor,$ as EditorModule};