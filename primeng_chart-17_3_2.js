import*as t from"@angular/core";import{EventEmitter as r,PLATFORM_ID as o}from"@angular/core";import{isPlatformBrowser as h,CommonModule as l}from"@angular/common";import d from"chart.js/auto";var b=(()=>{class n{platformId;el;type;plugins=[];width;height;responsive=!0;ariaLabel;ariaLabelledBy;get data(){return this._data}set data(i){this._data=i,this.reinit()}get options(){return this._options}set options(i){this._options=i,this.reinit()}onDataSelect=new r;isBrowser=!1;initialized;_data;_options={};chart;constructor(i,a){this.platformId=i,this.el=a}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(i){if(this.chart){let a=this.chart.getElementsAtEventForMode(i,"nearest",{intersect:!0},!1),e=this.chart.getElementsAtEventForMode(i,"dataset",{intersect:!0},!1);a&&a[0]&&e&&this.onDataSelect.emit({originalEvent:i,element:a[0],dataset:e})}}initChart(){if(h(this.platformId)){let i=this.options||{};i.responsive=this.responsive,i.responsive&&(this.height||this.width)&&(i.maintainAspectRatio=!1),this.chart=new d(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}static ɵfac=function(a){return new(a||n)(t.ɵɵdirectiveInject(o),t.ɵɵdirectiveInject(t.ElementRef))};static ɵcmp=t.ɵɵdefineComponent({type:n,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:8,consts:[[2,"position","relative"],["role","img",3,"click"]],template:function(a,e){a&1&&(t.ɵɵelementStart(0,"div",0)(1,"canvas",1),t.ɵɵlistener("click",function(s){return e.onCanvasClick(s)}),t.ɵɵelementEnd()()),a&2&&(t.ɵɵstyleProp("width",e.responsive&&!e.width?null:e.width)("height",e.responsive&&!e.height?null:e.height),t.ɵɵadvance(1),t.ɵɵattribute("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("width",e.responsive&&!e.width?null:e.width)("height",e.responsive&&!e.height?null:e.height))},encapsulation:2,changeDetection:0})}return n})(),D=(()=>{class n{static ɵfac=function(a){return new(a||n)};static ɵmod=t.ɵɵdefineNgModule({type:n});static ɵinj=t.ɵɵdefineInjector({imports:[l]})}return n})();export{D as ChartModule,b as UIChart};