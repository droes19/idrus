import{isPlatformBrowser as s,DOCUMENT as c,CommonModule as a}from"@angular/common";import*as e from"@angular/core";import{EventEmitter as u,PLATFORM_ID as h,TemplateRef as f}from"@angular/core";var I=(()=>{class t{document;platformId;el;renderer;viewContainer;cd;onLoad=new u;template;documentScrollListener;view;window;constructor(n,i,o,d,r,l){this.document=n,this.platformId=i,this.el=o,this.renderer=d,this.viewContainer=r,this.cd=l,this.window=this.document.defaultView}ngAfterViewInit(){s(this.platformId)&&(this.shouldLoad()&&this.load(),this.isLoaded()||(this.documentScrollListener=this.renderer.listen(this.window,"scroll",()=>{this.shouldLoad()&&(this.load(),this.documentScrollListener&&this.documentScrollListener(),this.documentScrollListener=null)})))}shouldLoad(){if(this.isLoaded())return!1;{let n=this.el.nativeElement.getBoundingClientRect();return this.document.documentElement.clientHeight>=n.top}}load(){this.view=this.viewContainer.createEmbeddedView(this.template),this.onLoad.emit(),this.cd.detectChanges()}isLoaded(){return this.view!=null&&s(this.platformId)}ngOnDestroy(){this.view=null,this.documentScrollListener&&this.documentScrollListener()}static ɵfac=function(i){return new(i||t)(e.ɵɵdirectiveInject(c),e.ɵɵdirectiveInject(h),e.ɵɵdirectiveInject(e.ElementRef),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(e.ViewContainerRef),e.ɵɵdirectiveInject(e.ChangeDetectorRef))};static ɵdir=e.ɵɵdefineDirective({type:t,selectors:[["","pDefer",""]],contentQueries:function(i,o,d){if(i&1&&e.ɵɵcontentQuery(d,f,5),i&2){let r;e.ɵɵqueryRefresh(r=e.ɵɵloadQuery())&&(o.template=r.first)}},hostAttrs:[1,"p-element"],outputs:{onLoad:"onLoad"}})}return t})(),C=(()=>{class t{static ɵfac=function(i){return new(i||t)};static ɵmod=e.ɵɵdefineNgModule({type:t});static ɵinj=e.ɵɵdefineInjector({imports:[a]})}return t})();export{C as DeferModule,I as DeferredLoader};