import*as o from"@angular/common";import{isPlatformBrowser as c,DOCUMENT as g,CommonModule as m}from"@angular/common";import*as e from"@angular/core";import{EventEmitter as d,PLATFORM_ID as z}from"@angular/core";import{PrimeTemplate as f,SharedModule as S}from"primeng/api";import{DomHandler as l}from"primeng/dom";var _=["container"];function v(a,u){a&1&&e.ɵɵelementContainer(0)}function y(a,u){if(a&1){let t=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",6),e.ɵɵlistener("mousedown",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext().index,r=e.ɵɵnextContext();return e.ɵɵresetView(r.onGutterMouseDown(s,n))})("touchstart",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext().index,r=e.ɵɵnextContext();return e.ɵɵresetView(r.onGutterTouchStart(s,n))})("touchmove",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext(2);return e.ɵɵresetView(n.onGutterTouchMove(s))})("touchend",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext().index,r=e.ɵɵnextContext();return e.ɵɵresetView(r.onGutterTouchEnd(s,n))}),e.ɵɵelementStart(1,"div",7),e.ɵɵlistener("keyup",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext(2);return e.ɵɵresetView(n.onGutterKeyUp(s))})("keydown",function(s){e.ɵɵrestoreView(t);let n=e.ɵɵnextContext().index,r=e.ɵɵnextContext();return e.ɵɵresetView(r.onGutterKeyDown(s,n))}),e.ɵɵelementEnd()()}if(a&2){let t=e.ɵɵnextContext(2);e.ɵɵattribute("data-p-gutter-resizing",!1)("data-pc-section","gutter"),e.ɵɵadvance(1),e.ɵɵproperty("ngStyle",t.gutterStyle()),e.ɵɵattribute("aria-orientation",t.layout)("aria-valuenow",t.prevSize)("data-pc-section","gutterhandle")}}function x(a,u){if(a&1&&(e.ɵɵelementStart(0,"div",3),e.ɵɵtemplate(1,v,1,0,"ng-container",4),e.ɵɵelementEnd(),e.ɵɵtemplate(2,y,2,6,"div",5)),a&2){let t=u.$implicit,i=u.index,s=e.ɵɵnextContext();e.ɵɵclassMap(s.panelStyleClass),e.ɵɵproperty("ngClass",s.panelContainerClass())("ngStyle",s.panelStyle),e.ɵɵattribute("data-pc-name","splitter")("data-pc-section","root"),e.ɵɵadvance(1),e.ɵɵproperty("ngTemplateOutlet",t),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",i!==s.panels.length-1)}}var k=(()=>{class a{document;platformId;renderer;cd;el;styleClass;panelStyleClass;style;panelStyle;stateStorage="session";stateKey=null;layout="horizontal";gutterSize=4;step=5;minSizes=[];get panelSizes(){return this._panelSizes}set panelSizes(t){if(this._panelSizes=t,this.el&&this.el.nativeElement&&this.panels.length>0){let i=[...this.el.nativeElement.children[0].children].filter(n=>l.hasClass(n,"p-splitter-panel")),s=[];this.panels.map((n,r)=>{let p=(this.panelSizes.length-1>=r?this.panelSizes[r]:null)||100/this.panels.length;s[r]=p,i[r].style.flexBasis="calc("+p+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}onResizeEnd=new d;onResizeStart=new d;templates;containerViewChild;nested=!1;panels=[];dragging=!1;mouseMoveListener;mouseUpListener;touchMoveListener;touchEndListener;size;gutterElement;startPos;prevPanelElement;nextPanelElement;nextPanelSize;prevPanelSize;_panelSizes=[];prevPanelIndex;timer;prevSize;window;constructor(t,i,s,n,r){this.document=t,this.platformId=i,this.renderer=s,this.cd=n,this.el=r,this.window=this.document.defaultView}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"panel":this.panels.push(t.template);break;default:this.panels.push(t.template);break}})}ngAfterViewInit(){if(c(this.platformId)&&this.panels&&this.panels.length){let t=!1;if(this.isStateful()&&(t=this.restoreState()),!t){let i=[...this.el.nativeElement.children[0].children].filter(n=>l.hasClass(n,"p-splitter-panel")),s=[];this.panels.map((n,r)=>{let p=(this.panelSizes.length-1>=r?this.panelSizes[r]:null)||100/this.panels.length;s[r]=p,i[r].style.flexBasis="calc("+p+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=s,this.prevSize=parseFloat(s[0]).toFixed(4)}}}resizeStart(t,i,s){this.gutterElement=t.currentTarget||t.target.parentElement,this.size=this.horizontal()?l.getWidth(this.containerViewChild.nativeElement):l.getHeight(this.containerViewChild.nativeElement),s||(this.dragging=!0,this.startPos=this.horizontal()?t instanceof MouseEvent?t.pageX:t.changedTouches[0].pageX:t instanceof MouseEvent?t.pageY:t.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,s?(this.prevPanelSize=this.horizontal()?l.getOuterWidth(this.prevPanelElement,!0):l.getOuterHeight(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal()?l.getOuterWidth(this.nextPanelElement,!0):l.getOuterHeight(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal()?l.getOuterWidth(this.prevPanelElement,!0):l.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?l.getOuterWidth(this.nextPanelElement,!0):l.getOuterHeight(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=i,l.addClass(this.gutterElement,"p-splitter-gutter-resizing"),this.gutterElement.setAttribute("data-p-gutter-resizing","true"),l.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.containerViewChild.nativeElement.setAttribute("data-p-resizing","true"),this.onResizeStart.emit({originalEvent:t,sizes:this._panelSizes})}onResize(t,i,s){let n,r,h;s?this.horizontal()?(r=100*(this.prevPanelSize+i)/this.size,h=100*(this.nextPanelSize-i)/this.size):(r=100*(this.prevPanelSize-i)/this.size,h=100*(this.nextPanelSize+i)/this.size):(this.horizontal()?n=t.pageX*100/this.size-this.startPos*100/this.size:n=t.pageY*100/this.size-this.startPos*100/this.size,r=this.prevPanelSize+n,h=this.nextPanelSize-n),this.prevSize=parseFloat(r).toFixed(4),this.validateResize(r,h)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+h+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=h)}resizeEnd(t){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:t,sizes:this._panelSizes}),l.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),l.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(t,i){this.resizeStart(t,i),this.bindMouseListeners()}onGutterTouchStart(t,i){t.cancelable&&(this.resizeStart(t,i),this.bindTouchListeners(),t.preventDefault())}onGutterTouchMove(t){this.onResize(t),t.preventDefault()}onGutterTouchEnd(t){this.resizeEnd(t),this.unbindTouchListeners(),t.cancelable&&t.preventDefault()}repeat(t,i,s){this.resizeStart(t,i,!0),this.onResize(t,s,!0)}setTimer(t,i,s){this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,i,s)},40)}clearTimer(){this.timer&&clearTimeout(this.timer)}onGutterKeyUp(t){this.clearTimer(),this.resizeEnd(t)}onGutterKeyDown(t,i){switch(t.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(t,i,this.step*-1),t.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(t,i,this.step),t.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(t,i,this.step*-1),t.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(t,i,this.step),t.preventDefault();break}default:break}}validateResize(t,i){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>t||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>i)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=this.renderer.listen(this.document,"mousemove",t=>{this.onResize(t)})),this.mouseUpListener||(this.mouseUpListener=this.renderer.listen(this.document,"mouseup",t=>{this.resizeEnd(t),this.unbindMouseListeners()}))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=this.renderer.listen(this.document,"touchmove",t=>{this.onResize(t.changedTouches[0])})),this.touchEndListener||(this.touchEndListener=this.renderer.listen(this.document,"touchend",t=>{this.resizeEnd(t),this.unbindTouchListeners()}))}unbindMouseListeners(){this.mouseMoveListener&&(this.mouseMoveListener(),this.mouseMoveListener=null),this.mouseUpListener&&(this.mouseUpListener(),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(this.touchMoveListener(),this.touchMoveListener=null),this.touchEndListener&&(this.touchEndListener(),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let t=this.el.nativeElement.parentElement;for(;t&&!l.hasClass(t,"p-splitter");)t=t.parentElement;return t!==null}else return!1}isStateful(){return this.stateKey!=null}getStorage(){if(c(this.platformId))switch(this.stateStorage){case"local":return this.window.localStorage;case"session":return this.window.sessionStorage;default:throw new Error(this.stateStorage+" is not a valid value for the state storage, supported values are \"local\" and \"session\".")}else throw new Error("Storage is not a available by default on the server.")}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){let i=this.getStorage().getItem(this.stateKey);return i?(this._panelSizes=JSON.parse(i),[...this.containerViewChild.nativeElement.children].filter(n=>l.hasClass(n,"p-splitter-panel")).forEach((n,r)=>{n.style.flexBasis="calc("+this._panelSizes[r]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0):!1}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":this.layout==="horizontal","p-splitter-vertical":this.layout==="vertical"}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return this.layout==="horizontal"}static ɵfac=function(i){return new(i||a)(e.ɵɵdirectiveInject(g),e.ɵɵdirectiveInject(z),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(e.ChangeDetectorRef),e.ɵɵdirectiveInject(e.ElementRef))};static ɵcmp=e.ɵɵdefineComponent({type:a,selectors:[["p-splitter"]],contentQueries:function(i,s,n){if(i&1&&e.ɵɵcontentQuery(n,f,4),i&2){let r;e.ɵɵqueryRefresh(r=e.ɵɵloadQuery())&&(s.templates=r)}},viewQuery:function(i,s){if(i&1&&e.ɵɵviewQuery(_,5),i&2){let n;e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(s.containerViewChild=n.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(i,s){i&2&&e.ɵɵclassProp("p-splitter-panel-nested",s.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",step:"step",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:8,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],["tabindex","-1",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter","role","separator","tabindex","-1",3,"mousedown","touchstart","touchmove","touchend",4,"ngIf"],["role","separator","tabindex","-1",1,"p-splitter-gutter",3,"mousedown","touchstart","touchmove","touchend"],["tabindex","0",1,"p-splitter-gutter-handle",3,"ngStyle","keyup","keydown"]],template:function(i,s){i&1&&(e.ɵɵelementStart(0,"div",0,1),e.ɵɵtemplate(2,x,3,8,"ng-template",2),e.ɵɵelementEnd()),i&2&&(e.ɵɵclassMap(s.styleClass),e.ɵɵproperty("ngClass",s.containerClass())("ngStyle",s.style),e.ɵɵattribute("data-pc-name","splitter")("data-p-gutter-resizing",!1)("data-pc-section","root"),e.ɵɵadvance(2),e.ɵɵproperty("ngForOf",s.panels))},dependencies:[o.NgClass,o.NgForOf,o.NgIf,o.NgTemplateOutlet,o.NgStyle],styles:[`@layer primeng{.p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex;min-width:0}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}}
`],encapsulation:2,changeDetection:0})}return a})(),N=(()=>{class a{static ɵfac=function(i){return new(i||a)};static ɵmod=e.ɵɵdefineNgModule({type:a});static ɵinj=e.ɵɵdefineInjector({imports:[m,S]})}return a})();export{k as Splitter,N as SplitterModule};