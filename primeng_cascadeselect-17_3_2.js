var D=Object.defineProperty,k=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var v=(o,l,e)=>l in o?D(o,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[l]=e,C=(o,l)=>{for(var e in l||={})G.call(l,e)&&v(o,e,l[e]);if(b)for(var e of b(l))K.call(l,e)&&v(o,e,l[e]);return o},I=(o,l)=>k(o,F(l));import*as c from"@angular/common";import{CommonModule as A}from"@angular/common";import*as t from"@angular/core";import{forwardRef as B,EventEmitter as d,signal as O,computed as y,effect as R}from"@angular/core";import{NG_VALUE_ACCESSOR as N}from"@angular/forms";import*as f from"primeng/api";import{PrimeTemplate as H,SharedModule as S}from"primeng/api";import{DomHandler as h}from"primeng/dom";import{AngleRightIcon as w}from"primeng/icons/angleright";import{ChevronDownIcon as x}from"primeng/icons/chevrondown";import{TimesIcon as V}from"primeng/icons/times";import*as E from"primeng/overlay";import{OverlayModule as T}from"primeng/overlay";import*as L from"primeng/ripple";import{RippleModule as $}from"primeng/ripple";import{ObjectUtils as p,UniqueComponentId as Q}from"primeng/utils";function j(o,l){o&1&&t.ɵɵelementContainer(0)}var U=o=>({$implicit:o});function q(o,l){if(o&1&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,j,1,0,"ng-container",8),t.ɵɵelementContainerEnd()),o&2){let e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",n.optionTemplate)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,U,e.option))}}function W(o,l){if(o&1&&(t.ɵɵelementStart(0,"span",9),t.ɵɵtext(1),t.ɵɵelementEnd()),o&2){let e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();t.ɵɵattribute("data-pc-section","text"),t.ɵɵadvance(1),t.ɵɵtextInterpolate(n.getOptionLabelToRender(e))}}function z(o,l){o&1&&t.ɵɵelement(0,"AngleRightIcon")}function X(o,l){}function J(o,l){o&1&&t.ɵɵtemplate(0,X,0,0,"ng-template")}function Y(o,l){if(o&1&&(t.ɵɵelementStart(0,"span",10),t.ɵɵtemplate(1,z,1,0,"AngleRightIcon",11)(2,J,1,0,null,12),t.ɵɵelementEnd()),o&2){let e=t.ɵɵnextContext(2);t.ɵɵattribute("data-pc-section","groupIcon"),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!e.groupIconTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",e.groupIconTemplate)}}function Z(o,l){if(o&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"p-cascadeSelectSub",13),t.ɵɵlistener("onChange",function(i){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext(2);return t.ɵɵresetView(s.onOptionChange(i))}),t.ɵɵelementEnd()}if(o&2){let e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();t.ɵɵproperty("role","group")("selectId",n.selectId)("focusedOptionId",n.focusedOptionId)("activeOptionPath",n.activeOptionPath)("options",n.getOptionGroupChildren(e))("optionLabel",n.optionLabel)("optionValue",n.optionValue)("level",n.level+1)("optionGroupLabel",n.optionGroupLabel)("optionGroupChildren",n.optionGroupChildren)("dirty",n.dirty)("optionTemplate",n.optionTemplate)}}function ee(o,l){if(o&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",2)(1,"div",3),t.ɵɵlistener("click",function(i){let a=t.ɵɵrestoreView(e).$implicit,r=t.ɵɵnextContext();return t.ɵɵresetView(r.onOptionClick(i,a))}),t.ɵɵtemplate(2,q,2,4,"ng-container",4)(3,W,2,2,"ng-template",null,5,t.ɵɵtemplateRefExtractor)(5,Y,3,3,"span",6),t.ɵɵelementEnd(),t.ɵɵtemplate(6,Z,1,12,"p-cascadeSelectSub",7),t.ɵɵelementEnd()}if(o&2){let e=l.$implicit,n=l.index,i=t.ɵɵreference(4),s=t.ɵɵnextContext();t.ɵɵproperty("ngClass",s.getItemClass(e))("id",s.getOptionId(e)),t.ɵɵattribute("aria-level",s.level+1)("aria-setsize",s.options.length)("data-pc-section","item")("aria-label",s.getOptionLabelToRender(e))("aria-selected",s.isOptionGroup(e)?void 0:s.isOptionSelected(e))("aria-posinset",n+1),t.ɵɵadvance(1),t.ɵɵattribute("tabindex",0)("data-pc-section","content"),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",s.optionTemplate)("ngIfElse",i),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",s.isOptionGroup(e)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",s.isOptionGroup(e)&&s.isOptionActive(e))}}var te=o=>({"p-cascadeselect-panel-root":o}),ie=["focusInput"],ne=["container"],oe=["panel"],se=["overlay"];function ae(o,l){o&1&&t.ɵɵelementContainer(0)}var le=(o,l)=>({$implicit:o,placeholder:l});function pe(o,l){if(o&1&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,ae,1,0,"ng-container",16),t.ɵɵelementContainerEnd()),o&2){let e=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",e.valueTemplate)("ngTemplateOutletContext",t.ɵɵpureFunction2(2,le,e.value,e.placeholder))}}function re(o,l){if(o&1&&t.ɵɵtext(0),o&2){let e=t.ɵɵnextContext();t.ɵɵtextInterpolate1(" ",e.label()," ")}}function ce(o,l){if(o&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"TimesIcon",19),t.ɵɵlistener("click",function(i){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext(2);return t.ɵɵresetView(s.clear(i))}),t.ɵɵelementEnd()}o&2&&(t.ɵɵproperty("styleClass","p-cascadeselect-clear-icon"),t.ɵɵattribute("data-pc-section","clearicon")("aria-hidden",!0))}function de(o,l){}function he(o,l){o&1&&t.ɵɵtemplate(0,de,0,0,"ng-template")}function ue(o,l){if(o&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",20),t.ɵɵlistener("click",function(i){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext(2);return t.ɵɵresetView(s.clear(i))}),t.ɵɵtemplate(1,he,1,0,null,21),t.ɵɵelementEnd()}if(o&2){let e=t.ɵɵnextContext(2);t.ɵɵattribute("data-pc-section","clearicon")("aria-hidden",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",e.clearIconTemplate)}}function fe(o,l){if(o&1&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,ce,1,3,"TimesIcon",17)(2,ue,2,3,"span",18),t.ɵɵelementContainerEnd()),o&2){let e=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!e.clearIconTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",e.clearIconTemplate)}}function me(o,l){o&1&&t.ɵɵelement(0,"ChevronDownIcon",22),o&2&&t.ɵɵproperty("styleClass","p-cascadeselect-trigger-icon")}function ge(o,l){}function Oe(o,l){o&1&&t.ɵɵtemplate(0,ge,0,0,"ng-template")}function ye(o,l){if(o&1&&(t.ɵɵelementStart(0,"span",23),t.ɵɵtemplate(1,Oe,1,0,null,21),t.ɵɵelementEnd()),o&2){let e=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",e.triggerIconTemplate)}}function _e(o,l){if(o&1){let e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",24,25)(2,"div",26)(3,"p-cascadeSelectSub",27),t.ɵɵlistener("onChange",function(i){t.ɵɵrestoreView(e);let s=t.ɵɵnextContext();return t.ɵɵresetView(s.onOptionChange(i))}),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"span",12),t.ɵɵtext(5),t.ɵɵelementEnd()()}if(o&2){let e=t.ɵɵnextContext();t.ɵɵclassMap(e.panelStyleClass),t.ɵɵproperty("ngStyle",e.panelStyle),t.ɵɵattribute("data-pc-section","panel"),t.ɵɵadvance(2),t.ɵɵattribute("data-pc-section","wrapper"),t.ɵɵadvance(1),t.ɵɵproperty("options",e.processedOptions())("selectId",e.id)("focusedOptionId",e.focused?e.focusedOptionId:void 0)("activeOptionPath",e.activeOptionPath())("optionLabel",e.optionLabel)("optionValue",e.optionValue)("level",0)("optionTemplate",e.optionTemplate)("groupIconTemplate",e.groupIconTemplate)("optionGroupLabel",e.optionGroupLabel)("optionGroupChildren",e.optionGroupChildren)("optionDisabled",e.optionDisabled)("optionValue",e.optionValue)("optionLabel",e.optionLabel)("root",!0)("dirty",e.dirty)("role","tree"),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",e.selectedMessageText," ")}}var be={provide:N,useExisting:B(()=>Ce),multi:!0},ve=(()=>{class o{el;role;selectId;activeOptionPath;optionDisabled;focusedOptionId;options;optionGroupChildren;optionTemplate;groupIconTemplate;level=0;optionLabel;optionValue;optionGroupLabel;dirty;root;onChange=new d;constructor(e){this.el=e}ngOnInit(){this.root||this.position()}onOptionClick(e,n){this.onChange.emit({originalEvent:e,value:n,isFocus:!0})}onOptionChange(e){this.onChange.emit(e)}getOptionId(e){return`${this.selectId}_${e.key}`}getOptionLabel(e){return this.optionLabel?p.resolveFieldData(e.option,this.optionLabel):e.option}getOptionValue(e){return this.optionValue?p.resolveFieldData(e.option,this.optionValue):e.option}getOptionLabelToRender(e){return this.isOptionGroup(e)?this.getOptionGroupLabel(e):this.getOptionLabel(e)}isOptionDisabled(e){return this.optionDisabled?p.resolveFieldData(e.option,this.optionDisabled):!1}getOptionGroupLabel(e){return this.optionGroupLabel?p.resolveFieldData(e.option,this.optionGroupLabel):null}getOptionGroupChildren(e){return e.children}isOptionGroup(e){return p.isNotEmpty(e.children)}isOptionSelected(e){return!this.isOptionGroup(e)&&this.isOptionActive(e)}isOptionActive(e){return this.activeOptionPath.some(n=>n.key===e.key)}isOptionFocused(e){return this.focusedOptionId===this.getOptionId(e)}getItemClass(e){return{"p-cascadeselect-item":!0,"p-cascadeselect-item-group":this.isOptionGroup(e),"p-cascadeselect-item-active p-highlight":this.isOptionActive(e),"p-focus":this.isOptionFocused(e),"p-disabled":this.isOptionDisabled(e)}}position(){let e=this.el.nativeElement.parentElement,n=h.getOffset(e),i=h.getViewport(),s=this.el.nativeElement.children[0].offsetParent?this.el.nativeElement.children[0].offsetWidth:h.getHiddenElementOuterWidth(this.el.nativeElement.children[0]),a=h.getOuterWidth(e.children[0]);parseInt(n.left,10)+a+s>i.width-h.calculateScrollbarWidth()&&(this.el.nativeElement.children[0].style.left="-200%")}static ɵfac=function(n){return new(n||o)(t.ɵɵdirectiveInject(t.ElementRef))};static ɵcmp=t.ɵɵdefineComponent({type:o,selectors:[["p-cascadeSelectSub"]],inputs:{role:"role",selectId:"selectId",activeOptionPath:"activeOptionPath",optionDisabled:"optionDisabled",focusedOptionId:"focusedOptionId",options:"options",optionGroupChildren:"optionGroupChildren",optionTemplate:"optionTemplate",groupIconTemplate:"groupIconTemplate",level:"level",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupLabel:"optionGroupLabel",dirty:"dirty",root:"root"},outputs:{onChange:"onChange"},decls:2,vars:6,consts:[["aria-orientation","horizontal",1,"p-cascadeselect-panel","p-cascadeselect-items",3,"ngClass"],["ngFor","",3,"ngForOf"],["role","treeitem",3,"ngClass","id"],["pRipple","",1,"p-cascadeselect-item-content",3,"click"],[4,"ngIf","ngIfElse"],["defaultOptionTemplate",""],["class","p-cascadeselect-group-icon",4,"ngIf"],["class","p-cascadeselect-sublist",3,"role","selectId","focusedOptionId","activeOptionPath","options","optionLabel","optionValue","level","optionGroupLabel","optionGroupChildren","dirty","optionTemplate","onChange",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-cascadeselect-item-text"],[1,"p-cascadeselect-group-icon"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-cascadeselect-sublist",3,"role","selectId","focusedOptionId","activeOptionPath","options","optionLabel","optionValue","level","optionGroupLabel","optionGroupChildren","dirty","optionTemplate","onChange"]],template:function(n,i){n&1&&(t.ɵɵelementStart(0,"ul",0),t.ɵɵtemplate(1,ee,7,14,"ng-template",1),t.ɵɵelementEnd()),n&2&&(t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(4,te,i.root)),t.ɵɵattribute("role",i.role)("data-pc-section",i.level===0?"list":"sublist"),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.options))},dependencies:()=>[c.NgClass,c.NgForOf,c.NgIf,c.NgTemplateOutlet,L.Ripple,w,o],encapsulation:2,changeDetection:0})}return o})(),Ce=(()=>{class o{el;cd;config;overlayService;id;selectOnFocus=!1;searchMessage;emptyMessage;selectionMessage;emptySearchMessage;emptySelectionMessage;searchLocale;optionDisabled;autoOptionFocus=!0;styleClass;style;options;optionLabel;optionValue;optionGroupLabel;optionGroupChildren;placeholder;value;dataKey;inputId;tabindex=0;ariaLabelledBy;inputLabel;ariaLabel;appendTo;disabled;showClear=!1;panelStyleClass;panelStyle;overlayOptions;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}onChange=new d;onGroupChange=new d;onShow=new d;onHide=new d;onClear=new d;onBeforeShow=new d;onBeforeHide=new d;onFocus=new d;onBlur=new d;focusInputViewChild;containerViewChild;panelViewChild;overlayViewChild;templates;_showTransitionOptions="";_hideTransitionOptions="";selectionPath=null;focused=!1;overlayVisible=!1;dirty=!0;searchValue;searchTimeout;valueTemplate;optionTemplate;triggerIconTemplate;groupIconTemplate;clearIconTemplate;onModelChange=()=>{};onModelTouched=()=>{};focusedOptionInfo=O({index:-1,level:0,parentKey:""});activeOptionPath=O([]);modelValue=O(null);get containerClass(){return{"p-cascadeselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue(),"p-inputwrapper-focus":this.focused||this.overlayVisible,"p-overlay-open":this.overlayVisible}}get labelClass(){return{"p-cascadeselect-label":!0,"p-inputtext":!0,"p-placeholder":this.label()===this.placeholder,"p-cascadeselect-label-empty":!this.value&&(this.label()==="p-emptylabel"||this.label().length===0)}}get focusedOptionId(){return this.focusedOptionInfo().index!==-1?`${this.id}${p.isNotEmpty(this.focusedOptionInfo().parentKey)?"_"+this.focusedOptionInfo().parentKey:""}_${this.focusedOptionInfo().index}`:null}get filled(){return typeof this.modelValue()=="string"?!!this.modelValue():this.modelValue()||this.modelValue()!=null||this.modelValue()!=null}get searchResultMessageText(){return p.isNotEmpty(this.visibleOptions())?this.searchMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptySearchMessageText}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptySearchMessageText(){return this.emptySearchMessage||this.config.translation.emptySearchMessage||""}get emptyMessageText(){return this.emptyMessage||this.config.translation.emptyMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText}visibleOptions=y(()=>{let e=this.activeOptionPath().find(n=>n.key===this.focusedOptionInfo().parentKey);return e?e.children:this.processedOptions()});processedOptions=y(()=>this.createProcessedOptions(this.options||[]));label=y(()=>{let e=this.placeholder||"p-emptylabel";if(this.hasSelectedOption()){let n=this.findOptionPathByValue(this.modelValue(),null),i=p.isNotEmpty(n)?n[n.length-1]:null;return i?this.getOptionLabel(i.option):e}return e});get _label(){let e=this.placeholder||"p-emptylabel";if(this.hasSelectedOption()){let n=this.findOptionPathByValue(this.modelValue(),null),i=p.isNotEmpty(n)?n[n.length-1]:null;return i?this.getOptionLabel(i.option):e}return e}hasSelectedOption(){return p.isNotEmpty(this.modelValue())}createProcessedOptions(e,n=0,i={},s=""){let a=[];return e&&e.forEach((r,u)=>{let m=(s!==""?s+"_":"")+u,g={option:r,index:u,level:n,key:m,parent:i,parentKey:s};g.children=this.createProcessedOptions(this.getOptionGroupChildren(r,n),n+1,g,m),a.push(g)}),a}onInputFocus(e){this.disabled||(this.focused=!0,this.onFocus.emit(e))}onInputBlur(e){this.focused=!1,this.focusedOptionInfo.set({indeX:-1,level:0,parentKey:""}),this.searchValue="",this.onModelTouched(),this.onBlur.emit(e)}onInputKeyDown(e){if(this.disabled){e.preventDefault();return}let n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e);break;case"PageDown":case"PageUp":case"ShiftLeft":case"ShiftRight":break;default:!n&&p.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(e,e.key));break}}onArrowDownKey(e){let n=this.focusedOptionInfo().index!==-1?this.findNextOptionIndex(this.focusedOptionInfo().index):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n),!this.overlayVisible&&this.show(),e.preventDefault()}onArrowUpKey(e){if(e.altKey){if(this.focusedOptionInfo().index!==-1){let n=this.visibleOptions[this.focusedOptionInfo().index];!this.isProccessedOptionGroup(n)&&this.onOptionChange({originalEvent:e,value:n})}this.overlayVisible&&this.hide(),e.preventDefault()}else{let n=this.focusedOptionInfo().index!==-1?this.findPrevOptionIndex(this.focusedOptionInfo().index):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,n),!this.overlayVisible&&this.show(),e.preventDefault()}}onArrowLeftKey(e){if(this.overlayVisible){let n=this.visibleOptions()[this.focusedOptionInfo().index],i=this.activeOptionPath().find(r=>r.key===n.parentKey),s=this.focusedOptionInfo().parentKey===""||i&&i.key===this.focusedOptionInfo().parentKey,a=p.isEmpty(n.parent);if(s){let r=this.activeOptionPath().filter(u=>u.parentKey!==this.focusedOptionInfo().parentKey);this.activeOptionPath.set(r)}a||(this.focusedOptionInfo.set({index:-1,parentKey:i?i.parentKey:""}),this.searchValue="",this.onArrowDownKey(e)),e.preventDefault()}}onArrowRightKey(e){if(this.overlayVisible){let n=this.visibleOptions()[this.focusedOptionInfo().index];this.isProccessedOptionGroup(n)&&(this.activeOptionPath().some(a=>n.key===a.key)?(this.focusedOptionInfo.set({index:-1,parentKey:n.key}),this.searchValue="",this.onArrowDownKey(e)):this.onOptionChange({originalEvent:e,value:n})),e.preventDefault()}}onHomeKey(e){this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show(),e.preventDefault()}onEndKey(e){this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show(),e.preventDefault()}onEnterKey(e){if(!this.overlayVisible)this.onArrowDownKey(e);else if(this.focusedOptionInfo().index!==-1){let n=this.visibleOptions()[this.focusedOptionInfo().index],i=this.isProccessedOptionGroup(n);this.onOptionChange({originalEvent:e,value:n}),!i&&this.hide()}e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e){if(this.focusedOptionInfo().index!==-1){let n=this.visibleOptions()[this.focusedOptionInfo().index];!this.isProccessedOptionGroup(n)&&this.onOptionChange({originalEvent:e,value:n})}this.overlayVisible&&this.hide()}onBackspaceKey(e){p.isNotEmpty(this.modelValue())&&this.showClear&&this.clear(),e.stopPropagation()}equalityKey(){return this.optionValue?null:this.dataKey}updateModel(e,n){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.onChange.emit({originalEvent:n,value:e})}autoUpdateModel(){this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionInfo().index=this.findFirstFocusedOptionIndex(),this.onOptionChange({originalEvent:null,processedOption:this.visibleOptions()[this.focusedOptionInfo().index],isHide:!1}),!this.overlayVisible&&this.focusedOptionInfo.set({index:-1,level:0,parentKey:""}))}scrollInView(e=-1){let n=e!==-1?`${this.id}_${e}`:this.focusedOptionId,i=h.findSingle(this.panelViewChild?.nativeElement,`li[id="${n}"]`);i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"start"})}changeFocusedOptionIndex(e,n){if(this.focusedOptionInfo().index!==n){let i=this.focusedOptionInfo();this.focusedOptionInfo.set(I(C({},i),{index:n})),this.scrollInView()}this.selectOnFocus&&this.onOptionChange({originalEvent:e,processedOption:this.visibleOptions()[n],isHide:!1})}onOptionChange(e){let{originalEvent:n,value:i,isFocus:s,isHide:a}=e;if(p.isEmpty(i))return;let{index:r,level:u,parentKey:m,children:g}=i,M=p.isNotEmpty(g),_=this.activeOptionPath().filter(P=>P.parentKey!==m);_.push(i),this.focusedOptionInfo.set({index:r,level:u,parentKey:m}),this.activeOptionPath.set(_),M?this.onOptionGroupSelect({originalEvent:n,value:i,isFocus:!1}):this.onOptionSelect({originalEvent:n,value:i,isFocus:s}),s&&h.focus(this.focusInputViewChild.nativeElement)}onOptionSelect(e){let{originalEvent:n,value:i,isFocus:s}=e,a=this.getOptionValue(i.option),r=this.activeOptionPath();r.forEach(u=>u.selected=!0),this.activeOptionPath.set(r),this.updateModel(a,n),s&&this.hide(!0)}onOptionGroupSelect(e){this.dirty=!0,this.onGroupChange.emit(e)}onContainerClick(e){this.disabled||this.overlayViewChild?.el?.nativeElement?.contains(e.target)||(this.overlayVisible?this.hide():this.show(),this.focusInputViewChild?.nativeElement.focus())}isOptionMatched(e){return this.isValidOption(e)&&this.getProccessedOptionLabel(e).toLocaleLowerCase(this.searchLocale).startsWith(this.searchValue.toLocaleLowerCase(this.searchLocale))}isOptionDisabled(e){return this.optionDisabled?p.resolveFieldData(e,this.optionDisabled):!1}isValidOption(e){return!!e&&!this.isOptionDisabled(e.option)}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isSelected(e){return this.activeOptionPath().some(n=>n.key===e.key)}findOptionPathByValue(e,n,i=0){if(n=n||i===0&&this.processedOptions(),!n)return null;if(p.isEmpty(e))return[];for(let s=0;s<n.length;s++){let a=n[s];if(p.equals(e,this.getOptionValue(a.option),this.equalityKey()))return[a];let r=this.findOptionPathByValue(e,a.children,i+1);if(r)return r.unshift(a),r}}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findLastOptionIndex(){return p.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findNextOptionIndex(e){let n=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(i=>this.isValidOption(i)):-1;return n>-1?n+e+1:e}findPrevOptionIndex(e){let n=e>0?p.findLastIndex(this.visibleOptions().slice(0,e),i=>this.isValidOption(i)):-1;return n>-1?n:e}findSelectedOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e))}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}searchOptions(e,n){this.searchValue=(this.searchValue||"")+n;let i=-1,s=!1,a=this.focusedOptionInfo();return a.index!==-1?(i=this.visibleOptions().slice(a.index).findIndex(r=>this.isOptionMatched(r)),i=i===-1?this.visibleOptions().slice(0,a.index).findIndex(r=>this.isOptionMatched(r)):i+a.index):i=this.visibleOptions().findIndex(r=>this.isOptionMatched(r)),i!==-1&&(s=!0),i===-1&&a.index===-1&&(i=this.findFirstFocusedOptionIndex()),i!==-1&&this.changeFocusedOptionIndex(e,i),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),s}hide(e,n=!1){let i=()=>{this.overlayVisible=!1,this.activeOptionPath.set([]),this.focusedOptionInfo.set({index:-1,level:0,parentKey:""}),n&&h.focus(this.focusInputViewChild.nativeElement),this.onHide.emit(e)};setTimeout(()=>{i()},0)}show(e,n=!1){this.onShow.emit(e),this.overlayVisible=!0;let i=this.hasSelectedOption()?this.findOptionPathByValue(this.modelValue()):this.activeOptionPath();this.activeOptionPath.set(i);let s;if(this.hasSelectedOption()&&p.isNotEmpty(this.activeOptionPath())){let a=this.activeOptionPath()[this.activeOptionPath().length-1];s={index:this.autoOptionFocus?a.index:-1,level:a.level,parentKey:a.parentKey}}else s={index:this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,level:0,parentKey:""};this.focusedOptionInfo.set(s),n&&h.focus(this.focusInputViewChild.nativeElement)}clear(e){p.isNotEmpty(this.modelValue())&&this.showClear&&(this.updateModel(null),this.focusedOptionInfo.set({index:-1,level:0,parentKey:""}),this.activeOptionPath.set([]),this.onClear.emit()),e&&e.stopPropagation()}getOptionLabel(e){return this.optionLabel?p.resolveFieldData(e,this.optionLabel):e}getOptionValue(e){return this.optionValue?p.resolveFieldData(e,this.optionValue):e}getOptionGroupLabel(e){return this.optionGroupLabel?p.resolveFieldData(e,this.optionGroupLabel):null}getOptionGroupChildren(e,n){return p.resolveFieldData(e,this.optionGroupChildren[n])}isOptionGroup(e,n){return Object.prototype.hasOwnProperty.call(e,this.optionGroupChildren[n])}isProccessedOptionGroup(e){return p.isNotEmpty(e.children)}getProccessedOptionLabel(e){return this.isProccessedOptionGroup(e)?this.getOptionGroupLabel(e.option):this.getOptionLabel(e.option)}constructor(e,n,i,s){this.el=e,this.cd=n,this.config=i,this.overlayService=s,R(()=>{let a=this.activeOptionPath();p.isNotEmpty(a)&&this.overlayViewChild.alignOverlay()})}ngOnInit(){this.id=this.id||Q(),this.autoUpdateModel()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"value":this.valueTemplate=e.template;break;case"option":this.optionTemplate=e.template;break;case"triggericon":this.triggerIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"optiongroupicon":this.groupIconTemplate=e.template;break}})}onOverlayAnimationDone(e){switch(e.toState){case"void":this.dirty=!1;break}}writeValue(e){this.value=e,this.updateModel(e),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}static ɵfac=function(n){return new(n||o)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(f.PrimeNGConfig),t.ɵɵdirectiveInject(f.OverlayService))};static ɵcmp=t.ɵɵdefineComponent({type:o,selectors:[["p-cascadeSelect"]],contentQueries:function(n,i,s){if(n&1&&t.ɵɵcontentQuery(s,H,4),n&2){let a;t.ɵɵqueryRefresh(a=t.ɵɵloadQuery())&&(i.templates=a)}},viewQuery:function(n,i){if(n&1&&(t.ɵɵviewQuery(ie,5),t.ɵɵviewQuery(ne,5),t.ɵɵviewQuery(oe,5),t.ɵɵviewQuery(se,5)),n&2){let s;t.ɵɵqueryRefresh(s=t.ɵɵloadQuery())&&(i.focusInputViewChild=s.first),t.ɵɵqueryRefresh(s=t.ɵɵloadQuery())&&(i.containerViewChild=s.first),t.ɵɵqueryRefresh(s=t.ɵɵloadQuery())&&(i.panelViewChild=s.first),t.ɵɵqueryRefresh(s=t.ɵɵloadQuery())&&(i.overlayViewChild=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(n,i){n&2&&t.ɵɵclassProp("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)("p-cascadeselect-clearable",i.showClear&&!i.disabled)},inputs:{id:"id",selectOnFocus:"selectOnFocus",searchMessage:"searchMessage",emptyMessage:"emptyMessage",selectionMessage:"selectionMessage",emptySearchMessage:"emptySearchMessage",emptySelectionMessage:"emptySelectionMessage",searchLocale:"searchLocale",optionDisabled:"optionDisabled",autoOptionFocus:"autoOptionFocus",styleClass:"styleClass",style:"style",options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",placeholder:"placeholder",value:"value",dataKey:"dataKey",inputId:"inputId",tabindex:"tabindex",ariaLabelledBy:"ariaLabelledBy",inputLabel:"inputLabel",ariaLabel:"ariaLabel",appendTo:"appendTo",disabled:"disabled",showClear:"showClear",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",overlayOptions:"overlayOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onChange:"onChange",onGroupChange:"onGroupChange",onShow:"onShow",onHide:"onHide",onClear:"onClear",onBeforeShow:"onBeforeShow",onBeforeHide:"onBeforeHide",onFocus:"onFocus",onBlur:"onBlur"},features:[t.ɵɵProvidersFeature([be])],decls:18,vars:33,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["readonly","","type","text","role","combobox","aria-haspopup","tree",3,"disabled","placeholder","tabindex","focus","blur","keydown"],["focusInput",""],[3,"ngClass"],[4,"ngIf","ngIfElse"],["defaultValueTemplate",""],[4,"ngIf"],["role","button","aria-haspopup","listbox",1,"p-cascadeselect-trigger"],[3,"styleClass",4,"ngIf"],["class","p-cascadeselect-trigger-icon",4,"ngIf"],["role","status","aria-live","polite",1,"p-hidden-accessible"],[3,"visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationDone","onBeforeShow","onShow","onBeforeHide","onHide"],["overlay",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass","click",4,"ngIf"],["class","p-cascadeselect-clear-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-cascadeselect-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[3,"styleClass"],[1,"p-cascadeselect-trigger-icon"],[1,"p-cascadeselect-panel","p-component",3,"ngStyle"],["panel",""],[1,"p-cascadeselect-items-wrapper"],[1,"p-cascadeselect-items",3,"options","selectId","focusedOptionId","activeOptionPath","optionLabel","optionValue","level","optionTemplate","groupIconTemplate","optionGroupLabel","optionGroupChildren","optionDisabled","root","dirty","role","onChange"]],template:function(n,i){if(n&1&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵlistener("click",function(a){return i.onContainerClick(a)}),t.ɵɵelementStart(2,"div",2)(3,"input",3,4),t.ɵɵlistener("focus",function(a){return i.onInputFocus(a)})("blur",function(a){return i.onInputBlur(a)})("keydown",function(a){return i.onInputKeyDown(a)}),t.ɵɵelementEnd()(),t.ɵɵelementStart(5,"span",5),t.ɵɵtemplate(6,pe,2,5,"ng-container",6)(7,re,1,1,"ng-template",null,7,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵtemplate(9,fe,3,2,"ng-container",8),t.ɵɵelementStart(10,"div",9),t.ɵɵtemplate(11,me,1,1,"ChevronDownIcon",10)(12,ye,2,1,"span",11),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"span",12),t.ɵɵtext(14),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"p-overlay",13,14),t.ɵɵlistener("visibleChange",function(a){return i.overlayVisible=a})("onAnimationDone",function(a){return i.onOverlayAnimationDone(a)})("onBeforeShow",function(a){return i.onBeforeShow.emit(a)})("onShow",function(a){return i.show(a)})("onBeforeHide",function(a){return i.onBeforeHide.emit(a)})("onHide",function(a){return i.hide(a)}),t.ɵɵtemplate(17,_e,6,23,"ng-template",15),t.ɵɵelementEnd()()),n&2){let s=t.ɵɵreference(8);t.ɵɵclassMap(i.styleClass),t.ɵɵproperty("ngClass",i.containerClass)("ngStyle",i.style),t.ɵɵattribute("data-pc-name","cascadeselect")("data-pc-section","root"),t.ɵɵadvance(2),t.ɵɵattribute("data-pc-section","hiddenInputWrapper"),t.ɵɵadvance(1),t.ɵɵproperty("disabled",i.disabled)("placeholder",i.placeholder)("tabindex",i.disabled?-1:i.tabindex),t.ɵɵattribute("id",i.inputId)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("aria-expanded",i.overlayVisible)("aria-controls",i.id+"_tree")("aria-activedescendant",i.focused?i.focusedOptionId:void 0),t.ɵɵadvance(2),t.ɵɵproperty("ngClass",i.labelClass),t.ɵɵattribute("data-pc-section","label"),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.valueTemplate)("ngIfElse",s),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",i.filled&&!i.disabled&&i.showClear),t.ɵɵadvance(1),t.ɵɵattribute("aria-expanded",i.overlayVisible)("data-pc-section","dropdownIcon")("aria-hidden",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.triggerIconTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.triggerIconTemplate),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",i.searchResultMessageText," "),t.ɵɵadvance(1),t.ɵɵproperty("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}},dependencies:()=>[c.NgClass,c.NgIf,c.NgTemplateOutlet,c.NgStyle,E.Overlay,f.PrimeTemplate,x,V,ve],styles:[`@layer primeng{.p-cascadeselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-cascadeselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-cascadeselect-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-cascadeselect-label-empty{overflow:hidden;visibility:hidden}.p-cascadeselect-item{cursor:pointer;font-weight:400;white-space:nowrap}.p-cascadeselect-item-content{display:flex;align-items:center;overflow:hidden;position:relative}.p-cascadeselect-group-icon{margin-left:auto}.p-cascadeselect-items{margin:0;padding:0;list-style-type:none}.p-fluid .p-cascadeselect{display:flex}.p-fluid .p-cascadeselect .p-cascadeselect-label{width:1%}.p-cascadeselect-sublist{position:absolute;min-width:100%;z-index:1;display:none}.p-cascadeselect-item-active{overflow:visible!important}.p-cascadeselect-item-active>.p-cascadeselect-sublist{display:block;left:100%;top:0}.p-cascadeselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-cascadeselect-clearable,.p-overlay-modal .p-cascadeselect-sublist{position:relative}.p-overlay-modal .p-cascadeselect-item-active>.p-cascadeselect-sublist{left:0}}
`],encapsulation:2,changeDetection:0})}return o})(),$e=(()=>{class o{static ɵfac=function(n){return new(n||o)};static ɵmod=t.ɵɵdefineNgModule({type:o});static ɵinj=t.ɵɵdefineInjector({imports:[A,T,S,$,x,w,V,T,S]})}return o})();export{be as CASCADESELECT_VALUE_ACCESSOR,Ce as CascadeSelect,$e as CascadeSelectModule,ve as CascadeSelectSub};