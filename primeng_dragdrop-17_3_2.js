import{CommonModule as g}from"@angular/common";import*as t from"@angular/core";import{EventEmitter as a}from"@angular/core";import{DomHandler as d}from"primeng/dom";var m=(()=>{class i{el;zone;renderer;scope;dragEffect;dragHandle;onDragStart=new a;onDragEnd=new a;onDrag=new a;handle;dragListener;mouseDownListener;mouseUpListener;_pDraggableDisabled=!1;constructor(e,r,n){this.el=e,this.zone=r,this.renderer=n}get pDraggableDisabled(){return this._pDraggableDisabled}set pDraggableDisabled(e){this._pDraggableDisabled=e,this._pDraggableDisabled?this.unbindMouseListeners():(this.el.nativeElement.draggable=!0,this.bindMouseListeners())}ngAfterViewInit(){this.pDraggableDisabled||(this.el.nativeElement.draggable=!0,this.bindMouseListeners())}bindDragListener(){this.dragListener||this.zone.runOutsideAngular(()=>{this.dragListener=this.renderer.listen(this.el.nativeElement,"drag",this.drag.bind(this))})}unbindDragListener(){this.dragListener&&this.zone.runOutsideAngular(()=>{this.dragListener&&this.dragListener(),this.dragListener=null})}bindMouseListeners(){!this.mouseDownListener&&!this.mouseUpListener&&this.zone.runOutsideAngular(()=>{this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.mousedown.bind(this)),this.mouseUpListener=this.renderer.listen(this.el.nativeElement,"mouseup",this.mouseup.bind(this))})}unbindMouseListeners(){this.mouseDownListener&&this.mouseUpListener&&this.zone.runOutsideAngular(()=>{this.mouseDownListener&&this.mouseDownListener(),this.mouseUpListener&&this.mouseUpListener(),this.mouseDownListener=null,this.mouseUpListener=null})}drag(e){this.onDrag.emit(e)}dragStart(e){this.allowDrag()&&!this.pDraggableDisabled?(this.dragEffect&&(e.dataTransfer.effectAllowed=this.dragEffect),e.dataTransfer.setData("text",this.scope),this.onDragStart.emit(e),this.bindDragListener()):e.preventDefault()}dragEnd(e){this.onDragEnd.emit(e),this.unbindDragListener()}mousedown(e){this.handle=e.target}mouseup(e){this.handle=null}allowDrag(){return this.dragHandle&&this.handle?d.matches(this.handle,this.dragHandle):!0}ngOnDestroy(){this.unbindDragListener(),this.unbindMouseListeners()}static ɵfac=function(r){return new(r||i)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.NgZone),t.ɵɵdirectiveInject(t.Renderer2))};static ɵdir=t.ɵɵdefineDirective({type:i,selectors:[["","pDraggable",""]],hostAttrs:[1,"p-element"],hostBindings:function(r,n){r&1&&t.ɵɵlistener("dragstart",function(s){return n.dragStart(s)})("dragend",function(s){return n.dragEnd(s)})},inputs:{scope:["pDraggable","scope"],dragEffect:"dragEffect",dragHandle:"dragHandle",pDraggableDisabled:"pDraggableDisabled"},outputs:{onDragStart:"onDragStart",onDragEnd:"onDragEnd",onDrag:"onDrag"}})}return i})(),v=(()=>{class i{el;zone;renderer;scope;pDroppableDisabled=!1;dropEffect;onDragEnter=new a;onDragLeave=new a;onDrop=new a;constructor(e,r,n){this.el=e,this.zone=r,this.renderer=n}dragOverListener;ngAfterViewInit(){this.pDroppableDisabled||this.bindDragOverListener()}bindDragOverListener(){this.dragOverListener||this.zone.runOutsideAngular(()=>{this.dragOverListener=this.renderer.listen(this.el.nativeElement,"dragover",this.dragOver.bind(this))})}unbindDragOverListener(){this.dragOverListener&&this.zone.runOutsideAngular(()=>{this.dragOverListener&&this.dragOverListener(),this.dragOverListener=null})}dragOver(e){e.preventDefault()}drop(e){this.allowDrop(e)&&(d.removeClass(this.el.nativeElement,"p-draggable-enter"),e.preventDefault(),this.onDrop.emit(e))}dragEnter(e){e.preventDefault(),this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect),d.addClass(this.el.nativeElement,"p-draggable-enter"),this.onDragEnter.emit(e)}dragLeave(e){e.preventDefault(),d.removeClass(this.el.nativeElement,"p-draggable-enter"),this.onDragLeave.emit(e)}allowDrop(e){let r=e.dataTransfer.getData("text");if(typeof this.scope=="string"&&r==this.scope)return!0;if(Array.isArray(this.scope)){for(let n=0;n<this.scope.length;n++)if(r==this.scope[n])return!0}return!1}ngOnDestroy(){this.unbindDragOverListener()}static ɵfac=function(r){return new(r||i)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.NgZone),t.ɵɵdirectiveInject(t.Renderer2))};static ɵdir=t.ɵɵdefineDirective({type:i,selectors:[["","pDroppable",""]],hostAttrs:[1,"p-element"],hostBindings:function(r,n){r&1&&t.ɵɵlistener("drop",function(s){return n.drop(s)})("dragenter",function(s){return n.dragEnter(s)})("dragleave",function(s){return n.dragLeave(s)})},inputs:{scope:["pDroppable","scope"],pDroppableDisabled:"pDroppableDisabled",dropEffect:"dropEffect"},outputs:{onDragEnter:"onDragEnter",onDragLeave:"onDragLeave",onDrop:"onDrop"}})}return i})(),L=(()=>{class i{static ɵfac=function(r){return new(r||i)};static ɵmod=t.ɵɵdefineNgModule({type:i});static ɵinj=t.ɵɵdefineInjector({imports:[g]})}return i})();export{L as DragDropModule,m as Draggable,v as Droppable};